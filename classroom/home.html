    <link rel="stylesheet" href="assets/css/modal.css">
    <!-- PLUGIN CSS-->

    <!-- END PLUGIN CSS -->
    <script src="assets/js/scripts/classroom-lang.js"></script>
</head>

<body>
<div id="classroom-dashboard-background">
    <div id="classroom-dashboard-container">
        <div id="classroom-dashboard-sidebar" class="sidebar-classroom" style="display:none;">
            <div id="classroom-sidebar-logo" 
                 role="button" 
                 tabindex="0" 
                 aria-label="Retour à l'accueil - Navigation vers la page principale"
                 onclick="navigateToHome()" 
                 onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();navigateToHome();}"></div>
            <div class="classroom-navbar-button" id="dashboard-activities" 
                 onclick="navigatePanel('classroom-dashboard-activities-panel', 'dashboard-activities')"
                 onkeydown="if(event.key==='Enter'||event.key===' '){navigatePanel('classroom-dashboard-activities-panel', 'dashboard-activities');}"
                 role="button" tabindex="0"><img src="assets/media/my_activities.svg"
                    alt="Icône activités">
                <span data-i18n="classroom.ids.classroom-dashboard-activities-panel-teacher"></span>
            </div>
            <div class=" classroom-navbar-button" id="dashboard-help"
                onclick="navigatePanel('classroom-dashboard-help-panel', 'dashboard-help')" 
                onkeydown="if(event.key==='Enter'||event.key===' '){navigatePanel('classroom-dashboard-help-panel', 'dashboard-help');}"
                role="button" tabindex="0"><img
                    src="assets/media/call_for_help.svg" alt="Icône Appel à l'aide">
                <span data-i18n="classroom.ids.classroom-dashboard-help-panel"></span>
            </div>
            <div id="dashboard-profil" class="classroom-navbar-button"
                onclick="navigatePanel('classroom-dashboard-profil-panel', 'dashboard-profil')" 
                onkeydown="if(event.key==='Enter'||event.key===' '){navigatePanel('classroom-dashboard-profil-panel', 'dashboard-profil');}"
                role="button" tabindex="0"><img
                    class="user-picture" src="assets/media/profile_picture.svg" alt="Photo de profil">
                <span data-i18n="classroom.ids.classroom-dashboard-profil-panel-teacher"></span>
            </div>

        </div>
<div id="classroom-dashboard-sidebar-teacher" class="sidebar-classroom" style="display:none;">
    <div id="classroom-sidebar-logo" 
         role="button" 
         tabindex="0" 
         aria-label="Retour à l'accueil - Navigation vers la page principale"
         onclick="navigateToHome()" 
         onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();navigateToHome();}"></div>
    <div class=" classroom-navbar-button" id="dashboard-classes-teacher"
        onclick="navigatePanel('classroom-dashboard-classes-panel-teacher', 'dashboard-classes-teacher')" 
        onkeydown="if(event.key==='Enter'||event.key===' '){navigatePanel('classroom-dashboard-classes-panel-teacher', 'dashboard-classes-teacher');}"
        role="button" tabindex="0">
        <img src="assets/media/my_classes.svg" alt="Icône classe">
        <span data-i18n="classroom.ids.classroom-dashboard-classes-panel-teacher"></span> </div>
    <div class="classroom-navbar-button" id="dashboard-activities-teacher"
        onclick="navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher')" 
        onkeydown="if(event.key==='Enter'||event.key===' '){navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher');}"
        role="button" tabindex="0">
        <img src="assets/media/my_activities.svg" alt="Icône activités">
        <span data-i18n="classroom.ids.classroom-dashboard-activities-panel-teacher"></span> </div>
    <div id="dashboard-profil-teacher" class="active classroom-navbar-button"
        onclick="navigatePanel('classroom-dashboard-profil-panel-teacher', 'dashboard-profil-teacher')" 
        onkeydown="if(event.key==='Enter'||event.key===' '){navigatePanel('classroom-dashboard-profil-panel-teacher', 'dashboard-profil-teacher');}"
        role="button" tabindex="0"><img
            class="user-picture" src="assets/media/profile_picture.svg" alt="Photo de profil">
        <span data-i18n="classroom.ids.classroom-dashboard-profil-panel-teacher"></span></div>
</div>
<div id="manager-dashboard-sidebar" class="sidebar-classroom" style="display:none;">
    <!-- set your logo here -->
    <div id="classroom-sidebar-logo" 
         role="button" 
         tabindex="0" 
         aria-label="Retour à l'accueil - Navigation vers la page principale"
         onclick="navigateToHome()" 
         onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();navigateToHome();}"></div>

    <div class="classroom-navbar-button" id="dashboard-manager-groups"
        onclick="navigatePanel('manager-dashboard-main', 'dashboard-manager-groups')" 
        onkeydown="if(event.key==='Enter'||event.key===' '){navigatePanel('manager-dashboard-main', 'dashboard-manager-groups');}"
        role="button" tabindex="0"
        aria-label="Accéder au panneau des utilisateurs - Gérer les comptes et groupes d'utilisateurs">
        <img src="assets/media/my_classes.svg" alt="Icône classe" aria-hidden="true">
        <span data-i18n="manager.users.users">Utilisateurs</span>
    </div>

    <div class="classroom-navbar-button" id="dashboard-manager-apps"
        onclick="navigatePanel('manager-apps-main', 'dashboard-manager-apps')" 
        onkeydown="if(event.key==='Enter'||event.key===' '){navigatePanel('manager-apps-main', 'dashboard-manager-apps');}"
        role="button" tabindex="0"
        aria-label="Accéder au panneau des applications - Gérer les applications et licences">
        <img src="assets/media/my_apps.svg" alt="Icône Apps" aria-hidden="true">
        <span data-i18n="manager.apps.apps">Applications</span>
    </div>

    <div id="dashboard-profil-manager" class="classroom-navbar-button"
        onclick="navigatePanel('classroom-dashboard-profil-panel-manager', 'dashboard-profil-manager')" 
        onkeydown="if(event.key==='Enter'||event.key===' '){navigatePanel('classroom-dashboard-profil-panel-manager', 'dashboard-profil-manager');}"
        role="button" tabindex="0"
        aria-label="Accéder à mon profil manager - Voir mes paramètres et informations du compte">
        <img class="user-picture" src="assets/media/profile_picture.svg" alt="Photo de profil" aria-hidden="true">
        <span data-i18n="classroom.ids.classroom-dashboard-profil-panel-teacher"></span>
    </div>
</div>
<div id="groupadmin-dashboard-sidebar" class="sidebar-classroom" style="display:none;">
    <!-- set your logo here -->
    <div id="classroom-sidebar-logo" 
         role="button" 
         tabindex="0" 
         aria-label="Retour à l'accueil - Navigation vers la page principale"
         onclick="navigateToHome()" 
         onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();navigateToHome();}"></div>

    <div class="classroom-navbar-button" id="dashboard-groupadmin-users-side"
        onclick="navigatePanel('groupadmin-dashboard-users', 'dashboard-groupadmin-users-side')" role="button" tabindex="0">
        <img src="assets/media/my_classes.svg" alt="Icône classe">
        <span data-i18n="manager.users.users">Utilisateurs</span>
    </div>

    <div class="classroom-navbar-button" id="dashboard-groupadmin-apps"
        onclick="navigatePanel('groupadmin-apps-main', 'dashboard-groupadmin-apps')" role="button" tabindex="0">
        <img src="assets/media/my_apps.svg" alt="Icône classe">
        <span data-i18n="manager.apps.apps">Applications</span>
    </div>

    <div class="classroom-navbar-button" id="dashboard-groupadmin-help-side"
        onclick="navigatePanel('groupadmin-dashboard-help', 'dashboard-groupadmin-help-side')" role="button" tabindex="0">
        <img src="assets/media/call_for_help.svg" alt="Icône Appel à l'aide">
        <span data-i18n="manager.profil.help">Appel à l'aide</span>
    </div>

    <div id="dashboard-profil-groupadmin" class="classroom-navbar-button"
        onclick="navigatePanel('classroom-dashboard-profil-panel-groupadmin', 'dashboard-profil-groupadmin')" role="button" tabindex="0">
        <img class="user-picture" src="assets/media/profile_picture.svg" alt="Photo de profil">
        <span data-i18n="classroom.ids.classroom-dashboard-profil-panel-teacher"></span>
    </div>
</div>
<div id="classroom-dashboard-top-bar">
    <!-- Breadcrumb -->
    <div id="breadcrumb"></div>

    <div id="notif-div"  data-testid="homeNotifContainer"></div>
    <button class="btn c-btn-secondary" type="button" id="questionMenuButton" style="display: none;">
        <i class="fas fa-question"></i>
    </button>
    <div id="a11y-dropdown" class="dropdown">
        <button class="btn" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"  aria-label="Options d'accessibilité" title="Options d'accessibilité">
            <i class="fas fa-low-vision" aria-hidden="true"></i>
        </button>
        <div class="dropdown-menu dropdown-menu-right a11y-dropdown" aria-labelledby="dropdownMenuButton">
            <form action="javascript:void(0);" id="access-form">
                <h5 class="c-text-primary text-center"><i class="fas fa-low-vision"></i> <span data-i18n='switchAccessibility.title'></span></h5>

                <h5 data-i18n='switchAccessibility.theme'>Thème</h5>
                <div style="margin: 0 auto; width: 196px">
                    <input type="radio" id="radio-light-theme" name="theme" value="light">
                    <label for="radio-light-theme" data-i18n='switchAccessibility.light_theme'>Thème
                        clair</label><br>

                    <input type="radio" id="radio-dark-theme" name="theme" value="dark">
                    <label for="radio-dark-theme" data-i18n='switchAccessibility.dark_theme'>Thème
                        sombre</label><br>
                </div>

                <h5 data-i18n='switchAccessibility.contrast'>Contraste</h5>
                <div style="margin: 0 auto; width: 196px">
                    <input type="radio"  name="contrast" value="normal" id="radio-normal-contrast">
                    <label for="radio-normal-contrast" data-i18n='switchAccessibility.normal_contrast'>
                        Contraste normal
                    </label><br>

                    <input type="radio" name="contrast" value="high" id="radio-high-contrast">
                    <label for="radio-high-contrast" data-i18n='switchAccessibility.high_contrast'>
                        Contraste élevé
                    </label><br>
                </div>

                <h5 data-i18n='switchAccessibility.font'>Polices</h5>
                <div style="margin: 0 auto; width: 196px">
                    <input type="radio" id="radio-basic-font" name="font" value="lato">
                    <label for="radio-basic-font" style="font-family: 'Montserrat'!important" data-i18n='switchAccessibility.basic_font'>Basique</label><br>

                    <input type="radio" id="radio-luciole-font" name="font" value="luciole">
                    <label for="radio-luciole-font" style="font-family: 'Luciole'!important">Luciole</label><br>

                    <input type="radio" id="radio-dys-font" name="font" value="dys">
                    <label for="radio-dys-font" style="font-family: 'OpenDyslexic'!important">OpenDyslexic</label><br>

                    <input type="radio" id="radio-arial-font" name="font" value="arial">
                    <label for="radio-arial-font" style="font-family: 'Arial'!important">Arial</label><br>

                    <input type="radio" id="radio-verdana-font" name="font" value="verdana">
                    <label for="radio-verdana-font" style="font-family: 'Verdana'!important">Verdana</label><br>
                </div>
            </form>
        </div>
    </div>
</div>
<div id="classroom-dashboard-content" role="main" aria-label="Contenu principal du tableau de bord de la classe">

<div id="classroom-dashboard-profil-panel" style="display:none;" class="dashboard-block profile-panel">
        
        <div class="d-flex flex-column text-center align-items-center">
                <img src="assets/media/profile_picture.svg" alt="Photo de profil" class="user-picture">
                <span id="user-name" class="mt-4" data-i18n="classroom.profile.identity"></span>
                <span><span data-i18n="classroom.profil.class"></span><span id="classroom-name"></span></span>
                <!-- <span id="establishment-name"></span> -->
        </div>

        <div id="classroom-dashboard-profile-stats" role="region" aria-label="Statistiques des activités">
                <div style="grid-column: 1; grid-row: 1;" 
                     class="activity-panel-link" 
                     role="button" 
                     tabindex="0"
                     aria-label="Activités à faire, 0 activités à faire"
                     onclick="navigatePanel('classroom-dashboard-activities-panel', 'dashboard-activities')"
                     onkeydown="if(event.key==='Enter'||event.key===' ') { event.preventDefault(); navigatePanel('classroom-dashboard-activities-panel', 'dashboard-activities'); }">
                    <span class="stats-secondary todo-activities" aria-hidden="true"></span>
                    <span class="text-span-initial stats-description" data-i18n="[html]classroom.profil.todo"></span>
                </div>
                <div style="grid-column: 2; grid-row: 0;" 
                     class="activity-panel-link" 
                     role="button" 
                     tabindex="0"
                     aria-label="Activités terminées, 0 activités terminées"
                     onclick="navigatePanel('classroom-dashboard-activities-panel', 'dashboard-activities')"
                     onkeydown="if(event.key==='Enter'||event.key===' ') { event.preventDefault(); navigatePanel('classroom-dashboard-activities-panel', 'dashboard-activities'); }">
                    <span class="stats-primary done-activities" aria-hidden="true"></span>
                    <span class="text-span-initial stats-description" data-i18n="[html]classroom.profil.done"></span>
                </div>
        </div>
        <!-- <div id="space-return-button"></div> -->

        <div class="d-flex flex-column" style="gap: 1.5em;" role="group" aria-label="Actions du profil">
                <button class="btn mb-2 c-btn-outline-primary" 
                        id="settings-student"
                        aria-label="Paramètres du compte">
                    <span data-i18n="words.settings" class="text-capitalize me-1 text-span-initial"></span>
                    <i class="fas fa-cog" aria-hidden="true"></i>
                </button>
                <button id="teacherSwitchButton" 
                        class="btn mb-2 c-btn-outline-primary" 
                        onclick="modeProf()"
                        aria-label="Passer en mode enseignant">
                    <span class="text-span-initial me-1" data-i18n="[html]classroom.profil.switchModeTeacher"></span>
                    <i class="fas fa-exchange-alt" aria-hidden="true"></i>
                </button>
                <button class="btn mb-2 c-btn-red" 
                        onclick="goToDisconnect('classroom');"
                        aria-label="Se déconnecter de la classe">
                    <span data-i18n="words.disconnect" class="text-capitalize text-span-initial"></span>
                    <i class="fas fa-power-off" aria-hidden="true"></i>
                </button>
        </div>
</div>
<div id="classroom-dashboard-help-panel" style="display:none;" class="dashboard-block help-panel-student">
    <div class="contact-panel">

        <h2 data-i18n="classroom.help.student.label"></h2>

        <div id="about-contact-info-student">
            <form class="c-primary-form" id="about-contact-form-student">
                <div class="input-group mb-3">
                    <select id="help-student-select" class="form-control form-control-lg" aria-label="Sélectionner un enseignant pour demander de l'aide">
                    </select>
                </div>

                <div class="input-group mb-3">
                    <input type="text" name="subject" class="form-control" id="learner-contact-subject-input" data-i18n="[placeholder]classroom.help.student.title" placeholder="Objet" aria-label="Objet de votre demande d'aide">
                </div>

                <div class="input-group mb-3">
                    <textarea name="message" class="form-control" id="learner-contact-message-input" rows="15" cols="25" style="resize: none; width: 100%;" data-i18n="[placeholder]classroom.teacherHelpPanel.contactForm.messagePlaceholder" placeholder="Écrivez votre message ici. (Maximum 800 caractères)" aria-label="Message de votre demande d'aide (maximum 800 caractères)"></textarea>
                </div>

                <input type="submit" class="btn c-btn-primary" data-i18n="[value]classroom.teacherHelpPanel.contactForm.sendButton" disabled="disabled" style="cursor:not-allowed;float: right;">
            </form>
        </div>
        <br>
        <div id="footer-content">
            <p>
                <a class="footer-link text-uppercase" href="/classroom/privacy.php" target="_blank" data-i18n="[html]classroom.footer.privacy"></a>
            </p>
            <p>
                <a class="footer-link text-uppercase" href="/classroom/cgu.php" target="_blank" data-i18n="[html]classroom.footer.cgu"></a>
            </p>
            <p>
                <a class="footer-link text-uppercase" href="/classroom/legal.php" target="_blank" data-i18n="[html]classroom.footer.legal"></a>
            </p>
            <p data-i18n="classroom.footer.copyright">
            </p>
        </div>
    </div>
    <div class="faq-panel">
        <h2 class="c-text-secondary font-weight-bold text-center mt-3">FAQ</h2>
        <div id="student-faq-container"></div>
    </div>
</div>
<div id="classroom-dashboard-course-panel" class="dashboard-block" style="display:none;">

    <div class="container-fluid">

        <div class="course-state w-75 mx-auto" id="course-progress-bar">
        </div>


        <div class="row">
            <div id="main-div-course" class="col-12 col-lg-8 mb-3" style="margin: 0 auto;overflow-wrap: break-word;">

                <h3 id="activity-title-course" class="activity-title"></h3>

                <!-- Used for status / date  -->
                <p id="activity-details-course" class="activity-details"></p>


                <!-- Used for subtitle -->
                <p id="activity-introduction-course">
                    <span id="text-introduction-course"></span>
                </p>

                <!-- Used for states -->
                <div id="activity-states-container-course" style="display:none;">
                    <label for="activity-states-course" class="vitta-modal-title mt-2" data-i18n="classroom.activities.states">Énoncé de l'activité</label>
                    <p id="activity-states-course"></p>
                </div>

                <!-- @Update Rémi -->
                <div id="activity-student-response-course" style="display:none;">
                    <label id="label-activity-student-response-course" for="activity-student-response-content-course" class="vitta-modal-title mt-2" data-i18n="classroom.activities.studentAnswer">Réponse de l'élève</label>
                    <div id="activity-student-response-content-course"></div>
                </div>

                <!-- Used for content -->
                <div id="activity-content-container-course" style="display:none;">
                    <label for="activity-content-course" id="label-activity-content-course" class="vitta-modal-title mt-2" data-i18n="newActivities.contentTitle">Contenu de l'activité</label>
                    <p id="activity-content-course"></p>
                </div>

                <div id="activity-input-container-course" style="display:none;">
                    <label for="activity-input-course" class="vitta-modal-title mt-2" data-i18n="classroom.activities.putYourAnswer">Entrez votre réponse</label>
                    <textarea id="activity-input-course" style="height:400px"></textarea>
                </div>

                <div id="activity-drag-and-drop-container-course" style="display: none;">
                    <label class="vitta-modal-title mt-2" data-i18n="newActivities.ActivitiesData.title.dragAndDrop">Drag & drop</label>
                    <div id="drag-and-drop-text-course">

                    </div>
                     <div id="drag-and-drop-fields-course" class="drag-and-drop-fields">

                    </div>

                </div>

                <div id="activity-hint-container-course" style="display:none;">
                    <label for="activity-hint-course" class="vitta-modal-title mt-2" data-i18n="classroom.activities.hint">Indice</label>
                    <p id="activity-hint-course"></p>
                </div>


                <div id="course-result-message">
                    <p id="course-result-message-content"></p>
                </div>


                <div class="d-flex justify-content-center mt-2" id="course-btn-container" style="display:none;">

                    <div id="course-validate-buttons">
                        <button class="btn c-btn-primary mx-1" id="course-validate-course" data-i18n="classroom.activities.validate" onclick="coursesManager.validateCourse(1)">
                            <i class="fas fa-chevron-right"></i>
                        </button>

                        <button class="btn c-btn-grey mx-2" id="course-save-course" onclick="coursesManager.validateCourse(0)" data-i18n="classroom.activities.save-draft">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <br>
                    <div id="course-options-course-buttons" style="display:none;">

                        <div class="row my-1 mx-3">
                            <button class="btn c-btn-primary mx-1" id="course-next-course" onclick="coursesManager.readCourseFromStudent()">
                                Continuer le parcours >
                            </button>
                        </div>

                        <div class="row my-1 mx-3">
                            <button class="btn c-btn-grey mx-2" id="course-return" onclick="goBackToActivities()">
                                Retourner au menu des activités
                            </button>
                        </div>

                    </div>

                </div>

            </div>

            <div id="activity-correction-container-course" class="col-12 col-lg-4" style="display:none">
                <div id="activity-correction-course"></div>
            </div>
        </div>

    </div>
</div>

<div id="classroom-dashboard-course-panel-one-page" class="dashboard-block" style="display:none;">
    <div class="container-fluid d-none" id="one-page-course-student-content">

    </div>
</div>

<div id="classroom-dashboard-course-panel-ended" class="dashboard-block" style="display:none;">

    <div class="container-fluid">

        <div class="results-correcting">

            <div class="d-flex flex-column align-items-center justify-content-center mt-2">

                <h1 class="my-3">RÉSULTATS DU PARCOURS</h1>
                <p id="course-result-note"></p>

                <div id="course-activities-result" class="course-activities-result">


                </div>
    
            </div>

        </div>

    </div>

</div>
<div id="classroom-dashboard-sandbox-panel" style="display:none;" class="dashboard-block ">
    
</div>
<div id="classroom-dashboard-activities-panel" style="display:none;" class="dashboard-block">
    <div class="section-container section-new">
        <div class="section-header" onclick="sectionToggle('new')" 
             onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault(); sectionToggle('new');}"
             role="button" tabindex="0" aria-expanded="true" 
             aria-controls="new-activities-list" 
             aria-label="Basculer l'affichage des nouvelles activités">
            <i id="i-new" class="ms-2 fas fa-lg fa-chevron-down"></i>
            <h3 class="section-title" data-i18n="classroom.activities.new"></h3>
            <span class="resource-number"> </span>
        </div>
        <div id="new-activities-list"></div>
    </div>
    
    <div class="section-container section-saved">
        <div class="section-header" onclick="sectionToggle('saved')" 
             onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault(); sectionToggle('saved');}"
             role="button" tabindex="0" aria-expanded="false" 
             aria-controls="saved-activities-list" 
             aria-label="Basculer l'affichage des brouillons">
            <i id="i-saved" class="ms-2 fas fa-lg fa-chevron-up"></i>
            <h3 class="section-title" data-i18n="classroom.activities.saved">Brouillons</h3>
            <span class="resource-number"> </span>
        </div>
        <div id="saved-activities-list" style="display: none;"></div>
    </div>
    
    <div class="section-container section-current">
        <div class="section-header" onclick="sectionToggle('current')" 
             onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault(); sectionToggle('current');}"
             role="button" tabindex="0" aria-expanded="false" 
             aria-controls="current-activities-list" 
             aria-label="Basculer l'affichage des activités en cours">
            <i id="i-current" class="ms-2 fas fa-lg fa-chevron-up"></i>
            <h3 class="section-title" data-i18n="classroom.activities.current"></h3>
            <span class="resource-number"> </span>
        </div>
        <div id="current-activities-list" style="display: none;"></div>
    </div>
    
    <div class="section-container section-done">
        <div class="section-header" onclick="sectionToggle('done')" 
             onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault(); sectionToggle('done');}"
             role="button" tabindex="0" aria-expanded="false" 
             aria-controls="done-activities-list" 
             aria-label="Basculer l'affichage des activités terminées">
            <i id="i-done" class="ms-2 fas fa-lg fa-chevron-up"></i>
            <h3 class="section-title" data-i18n="classroom.activities.done"></h3>
            <span class="resource-number"> </span>
        </div>
        <div id="done-activities-list" style="display: none;"></div>
    </div>

</div>


<div id="classroom-dashboard-activity-panel" class="dashboard-block" style="display:none;">
    <div class="container-fluid">
        <div class="row">
            <div id="main-div" class="col-12 col-lg mb-3" style="margin: 0 auto;overflow-wrap: break-word;">

                <div class="d-flex flex-column flex-wrap align-items-center justify-content-center mt-2 mnh-2-5" id="title-container">
                    <h3 id="activity-title" class="activity-title"></h3>
                    <div id="activity-views-switcher" class="p-2 align-self-end"></div>
                </div>

                <!-- Used for status / date  -->
                <p id="activity-details" class="activity-details"></p>

                <!-- Disclaimer for autocorrect -->
                <div id="activity-auto-corrected-disclaimer" style="display:none;">
                    <span data-i18n="classroom.activities.isAutocorrected"></span>
                </div>

                <!-- Used for subtitle -->
                <p id="activity-introduction">
                    <span id="text-introduction"></span>
                </p>

                <!-- Used for states -->
                <div id="activity-states-container" style="display:none;">
                    <label for="activity-states" class="vitta-modal-title mt-2" data-i18n="classroom.activities.states">Énoncé de l'activité</label>
                    <p id="activity-states"></p>
                </div>

                <!-- @Update Rémi -->
                <div id="activity-student-response" style="display:none;">
                    <label id="label-activity-student-response" for="activity-student-response-content" class="vitta-modal-title mt-2" data-i18n="classroom.activities.studentAnswer">Réponse de l'élève</label>
                    <div id="activity-student-response-content"></div>
                </div>

                <!-- Used for content -->
                <div id="activity-content-container" style="display:none;">
                    <label for="activity-content" id="label-activity-content" class="vitta-modal-title mt-2" data-i18n="newActivities.contentTitle">Contenu de l'activité</label>
                    <div id="activity-content"></div>
                </div>

                <div id="activity-input-container" style="display:none;">
                    <label for="activity-input" class="vitta-modal-title mt-2" data-i18n="classroom.activities.putYourAnswer">Entrez votre réponse</label>
                    <textarea id="activity-input" style="height:400px"></textarea>
                </div>

                <div id="activity-drag-and-drop-container" style="display: none;">
                    <label class="vitta-modal-title mt-2" data-i18n="newActivities.ActivitiesData.title.dragAndDrop">Drag & drop</label>
                    <div id="drag-and-drop-text">

                    </div>
                     <div id="drag-and-drop-fields" class="drag-and-drop-fields">

                    </div>

                </div>

                <div id="activity-hint-container" style="display:none;">
                    <label for="activity-hint" class="vitta-modal-title mt-2" data-i18n="classroom.activities.hint">Indice</label>
                    <p id="activity-hint"></p>
                </div>

                <div class="d-flex justify-content-center mt-2 flex-wrap gap-3">
                    <button class="btn c-btn-primary mx-1" id="activity-validate" data-i18n="classroom.activities.validate" onclick="validateActivity(1)">
                        <i class="fas fa-chevron-right"></i>
                    </button>

                    <button class="btn c-btn-grey mx-2" id="activity-save" style="display:none;" onclick="validateActivity(0)" data-i18n="classroom.activities.save-draft">
                        <i class="fas fa-chevron-right"></i>
                    </button>

                    <div class="btn" id="activity-instruction" style="display:none">
                        <span data-i18n="classroom.activities.instruction"></span> <i class="fas fa-pen"></i>
                    </div>
                </div>
            </div>
            <div id="activity-correction-container" class="col-12 col-lg-4" style="display:none">
                <div id="activity-correction"></div>
            </div>
        </div>

    </div>
</div>

<div id="classroom-dashboard-activity-panel-success" class="dashboard-block" style="display:none;">
    <div class="results-panel results-success">
        <img src="assets/media/activity_results/success.png" class="image-vh" alt="Image de succès">
        <p>
            <span data-i18n="[html]classroom.successPanel"></span>
            <i class="fas fa-check"></i>
        </p>
        <button class="btn c-btn-primary mx-auto" onclick="goBackToActivities()">
            <span data-i18n="classroom.activities.return"></span> <i class="fas fa-chevron-right"></i>
        </button>
    </div>
</div>

<div id="classroom-dashboard-activity-panel-fail" class="dashboard-block" style="display:none;">
    <div class="results-panel results-fail">
        <img src="assets/media/activity_results/fail.png" class="image-vh" alt="Image d'erreur">
        <p>
            <span data-i18n="[html]classroom.failPanel"></span>
            <i class="fas fa-times"></i>
        </p>
        <button class="btn c-btn-primary mx-auto" onclick="goBackToActivities()">
            <span data-i18n="classroom.activities.return"></span> <i class="fas fa-chevron-right"></i>
        </button>
    </div>
</div>

<div id="classroom-dashboard-activity-panel-correcting" class="dashboard-block" style="display:none;">
    <div class="results-panel results-correcting">
        <img src="assets/media/activity_results/correcting.png" class="image-vh" alt="Image d'erreur">
        <p>
            <span data-i18n="[html]classroom.toCorrectPanel"></span>
            <i class="fas fa-pen"></i>
        </p>
        <button class="btn c-btn-primary mx-auto" onclick="goBackToActivities()">
            <span data-i18n="classroom.activities.return"></span> <i class="fas fa-chevron-right"></i>
        </button>
    </div>
</div>
<div id="classroom-dashboard-profil-panel-teacher" class="dashboard-block profile-panel" style="display:none;">
    <!-- Div alert when application has expired -->
    <div id="info-applications" class="alert alert-danger text-center" style="display:none;"></div>
    
    <div class="d-flex flex-column text-center">
        <img src="assets/media/profile_picture.svg" alt="Photo de profil" class="user-picture">
        <span id="user-name-teacher" class="mt-4" data-i18n="classroom.profile.identity"></span>
        <!--  <span>CLASSE : <span id="classroom-subject-teacher"> matière enseignée</span></span> -->
    </div>

    <div id="classroom-dashboard-profile-stats-teacher" role="region" aria-label="Statistiques des activités enseignant">
        <div style="grid-column: 2; grid-row: 1;" 
             class="activity-panel-link-t classroom-clickable"
             role="button" 
             tabindex="0"
             onclick="navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher')"
             onkeydown="if(event.key==='Enter'||event.key===' ') { event.preventDefault(); navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher'); }"
             aria-label="Accéder au panneau des activités - 0 activités créées">
            <span class="stats-primary owned-activities" aria-hidden="true">--</span>
            <span class="text-span-initial stats-description"
                data-i18n="[html]classroom.profil.create"></span>
        </div>
        <div style="grid-column: 1; grid-row: 1;" 
             class="classroom-panel-link classroom-clickable"
             role="button" 
             tabindex="0"
             onclick="navigatePanel('classroom-dashboard-classes-panel-teacher', 'dashboard-classes-teacher')"
             onkeydown="if(event.key==='Enter'||event.key===' ') { event.preventDefault(); navigatePanel('classroom-dashboard-classes-panel-teacher', 'dashboard-classes-teacher'); }"
             aria-label="Accéder au panneau des classes - 0 corrections à faire">
            <span class="stats-secondary tocorrect-activities" aria-hidden="true">--</span>
            <span class="text-span-initial stats-description"
                data-i18n="[html]classroom.profil.correctionToDo"></span>
        </div>
    </div>

    <div class="d-flex flex-column" style="gap: 1.5em;" role="group" aria-label="Actions du profil enseignant">
        <button class="btn c-btn-outline-primary" 
                id="settings-teacher"
                aria-label="Paramètres du compte enseignant">
            <span class="text-capitalize text-span-initial" data-i18n="words.settings" class="text-capitalize"></span>
            <i class="fas fa-cog" aria-hidden="true"></i>
        </button>

        <button class="btn c-btn-outline-secondary" 
                id="help-teacher"
                aria-label="Accéder à l'aide et aux tutoriels">
            <span data-i18n="words.help" class="text-capitalize text-span-initial"></span>
            <i class="fas fa-question-circle" aria-hidden="true"></i>
        </button>

        <button class="btn c-btn-outline-primary" 
                onclick="listeModeApprenant()" 
                id="switch-student"
                aria-label="Passer en mode étudiant">
            <span data-i18n="classroom.profil.switchMode" class="text-span-initial me-1"></span>
            <i class="fas fa-exchange-alt" aria-hidden="true"></i>
        </button>

        <button class="btn c-btn-red" 
                onclick="goToDisconnect('classroom');" 
                data-testid="classroomLogoutBtn"
                aria-label="Se déconnecter de la classe">
            <span data-i18n="words.disconnect" class="text-capitalize text-span-initial"></span>
            <i class="fas fa-power-off" aria-hidden="true"></i>
        </button>
    </div>
</div>

<div id="classroom-dashboard-account-panel-teacher" class="mx-3 dashboard-block classes-panel class-creation-form"
    style="display:none;">
    <h3 data-i18n="classroom.profil.accountSettings.title"></h3>
    <form action="#" id="update-teacher-account-form">
        <div class="form-group part-content-index part-row c-primary-form">
            <div class="form-row">
                <label for="profile-form-first-name" class="tutorial-label"
                    data-i18n="classroom.profil.accountSettings.firstname"></label>
                <input type="text" name="first-name" id="profile-form-first-name" class="form-control form-control-lg">
            </div>
            <div class="form-row">
                <label for="profile-form-last-name" class="tutorial-label"
                    data-i18n="classroom.profil.accountSettings.lastname"></label>
                <input type="text" name="last-name" id="profile-form-last-name" class="form-control form-control-lg">
            </div>
            <div class="form-row">
                <label for="profile-form-email" class="tutorial-label"
                    data-i18n="classroom.profil.accountSettings.email"></label>
                <input type="email" name="email" id="profile-form-email" class="form-control form-control-lg">
            </div>
            <div>
                <label for="profile-form-password" class="tutorial-label"
                    data-i18n="classroom.profil.accountSettings.password"></label>
            </div>
            <div class="form-inline">
                <input type="password" name="password" id="profile-form-password" class="form-control form-control-lg" autocomplete="off">
                <i class="classroom-clickable fas fa-low-vision ms-2 password-display-toggler"></i>
            </div>
            <label for="profile-form-confirm-password" class="tutorial-label"
                data-i18n="classroom.profil.accountSettings.confirmPassword"></label>
            <div class="form-inline">
                <input type="password" name="confirm-password" id="profile-form-confirm-password"
                    class="form-control form-control-lg" autocomplete="off">
                <i class="classroom-clickable fas fa-low-vision ms-2 password-display-toggler"></i>
            </div>
            <input type="hidden" name="teacher-id" id="profile-form-teacher-id">
            <div class="d-flex flex-column align-items-center">
                <a class="btn c-btn-primary m-3" id="validate-profile-update"
                    data-i18n="classroom.profil.accountSettings.updateButton"></a>
            </div>
        </div>
        <input type="hidden" name="current-password" id ="current-password">
    </form>
</div>
<div id="classroom-dashboard-classes-panel-teacher" style="display:none;" class="dashboard-block classes-panel">
    <div id="space-groupes"></div>

    <div class="buttons-interactions">
        <button id="teacher-new-classroom-btn" class="btn c-btn-outline-primary teacher-new-classe">
            <span data-i18n="classroom.classes.add"></span> <i class="fas fa-chevron-right"></i>
        </button>
    </div>


    <div class="list-classes mt-3" role="list">
        <div class="class-item">
            <div class="class-card-action action-new-class teacher-new-classe">
                <i class="fas fa-plus fa-5x"></i>
                <h4 id="classroom-card-class-title" data-i18n="classroom.classes.add"></h4>
            </div>
        </div>
    </div>
</div>

<div id="classroom-dashboard-form-classe-panel-update" style="display:none;" class="mx-3 dashboard-block classes-panel class-creation-form">
    <h3 data-i18n="classroom.classes.form.updateTitle"></h3>
    <form id="classroom-update-form">
        <div class="form-group part-content-index part-row c-primary-form">
            <div class="row">
                <label for="classroom-form-name-update" class="tutorial-label" data-i18n="classroom.classes.form.name"></label>
                <input type="text" id="classroom-form-name-update" class="form-control form-control-lg">
            </div>
            <div class="row">
                <label for="classroom-form-school-update" class="tutorial-label" data-i18n="classroom.classes.form.school">
                </label>
                <input type="text" id="classroom-form-school-update" class="form-control form-control-lg">
            </div>   
        </div>
        <a href="#" id="update-classroom-student-button" class="new-student-modal btn c-btn-primary m-3"><i class="fas fa-user-plus"></i><span class="ms-1" data-i18n="classroom.classes.form.addStudent"></span></a>
        <div class="table-students" id="table-students-update">
            <ul>
                <li id="no-student-label-update" data-i18n="classroom.classes.form.noStudent"></li>
            </ul>
        </div>
        <div class="c-checkbox mt-2">
            <input type="checkbox" name="classroom-form-is-blocked" id="classroom-form-is-blocked-update">
            <label for="classroom-form-is-blocked-update" data-i18n="classroom.classes.form.isBlockedButton"></label>
        </div>
        <button type="submit" class="new-classroom-form btn c-btn-primary m-3"><i class="fas fa-save"></i><span class="ms-1" data-i18n="classroom.classes.form.save"></span> </button>
    </form>
</div>

<div id="classroom-dashboard-form-classe-panel" style="display:none;" class="mx-3 dashboard-block classes-panel class-creation-form">
    <h3 data-i18n="classroom.classes.form.title"></h3>
    <form id="classroom-create-form">
        <div class="form-group part-content-index part-row c-primary-form">
            <div class="row">
                <label for="classroom-form-name" class="tutorial-label" data-i18n="classroom.classes.form.name"></label>
                <input type="text" id="classroom-form-name" class="form-control form-control-lg">
            </div>
            <div class="row">
                <label for="classroom-form-school" class="tutorial-label" data-i18n="classroom.classes.form.school">
                </label>
                <input type="text" id="classroom-form-school" class="form-control form-control-lg">
            </div>   
        </div>
<!--         <a href="#" id="create-classroom-student-button" class="new-student-modal btn c-btn-primary m-3"><i class="fas fa-user-plus"></i><span class="ms-1" data-i18n="classroom.classes.form.addStudent"></span></a>
        <div class="table-students" id="table-students">
            <ul>
                <li id="no-student-label" data-i18n="classroom.classes.form.noStudent"></li>
            </ul>
        </div>
        <div class="c-checkbox mt-2">
            <input type="checkbox" name="classroom-form-is-blocked" id="classroom-form-is-blocked">
            <label for="classroom-form-is-blocked" data-i18n="classroom.classes.form.isBlockedButton"></label>
        </div> -->
        <button type="submit" class="new-classroom-form btn c-btn-primary m-3"><i class="fas fa-save"></i><span class="ms-1" data-i18n="classroom.classes.form.save"></span> </button>
    </form>
</div>

<div id="classroom-table-panel-teacher" style="display:none;" class="dashboard-block classes-panel class-stats-panel">
    <div id="classroom-panel-header" style="display: none;">
        <div class="global-class-stats">
            <div class="stat-element">
                <span class="todo-ring">0</span>
                <span class="todo-ring-label">Activités à faire</span>
            </div>
            <div class="stat-element">
                <span class="done-ring">2</span>
                <span class="done-ring-label">Activités réalisées</span>
            </div>
            <div class="stat-element">
                <svg class="average-ring" width="60" height="60">
                    <circle class="average-ring__bg" stroke="var(--classroom-text-2)" stroke-width="4" fill="transparent" r="25" cx="30" cy="30" opacity="0.2" />
                    <circle class="average-ring__circle" stroke="var(--classroom-secondary)" stroke-width="4" fill="transparent" r="25" cx="30" cy="30" />
                    <span class="todo-ring">0</span>
                </svg>
                <span class="average-ring-label">Moyenne générale</span>

            </div>
        </div>
        

    </div>

    <div id="classroom-panel-table-container" class="stylized-scrollbar">
        <table role="table" aria-label="Tableau des élèves et leurs activités">
            <thead role="rowgroup">
                <tr id="header-table-teach" role="row">
                </tr>
            </thead>
            <tbody id="body-table-teach" role="rowgroup">

            </tbody>
        </table>
    </div>

    <div id="classroom-panel-legend">
        <div id="add-student-container" class="ms-3"></div>
        <div id="export-class-container"></div>

        <div id="legend-container">
            <ul class="legend" style="list-style:none;">
                <li class="ms-3">
                    <div class="bilan-legend bilan-3">
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                    </div>
                    <span data-i18n="classroom.activities.veryGoodProficiency"></span>
                </li>
                <li class="ms-3">
                    <div class="bilan-legend bilan-2">
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                    </div>
                    <span data-i18n="classroom.activities.goodProficiency"></span>
                </li>
                <li class="ms-3">
                    <div class="bilan-legend bilan-1">
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                    </div>
                    <span data-i18n="classroom.activities.weakProficiency"></span>
                </li>
                <li class="ms-3">
                    <div class="bilan-legend bilan-0">
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                    </div>
                    <span data-i18n="classroom.activities.insufficientProficiency"></span>
                </li>
                <li class="ms-3">
                    <div class="bilan-legend bilan-4">
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                        <div class="monochrome-grade-div"></div>
                    </div>
                    <span data-i18n="classroom.activities.noProficiency"></span>
                </li>
            </ul>
            <ul class="legend" style="list-style:none; align-items: flex-end">
                <li class="ms-3">
                    <div class="bilan-legend fas fa-pen"></div>
                    <span data-i18n="classroom.activities.todo"></span>
                </li>
                <li class="ms-3">
                    <div class="bilan-legend fas fa-stopwatch"></div>
                    <span data-i18n="classroom.activities.waiting"></span>
                </li>

                <li class="ms-3 c-checkbox" style="height: 1.6em;">
                    <input type="checkbox" id="is-monochrome" title="" class="me-2">
                    <label for="is-monochrome">
                        <span class="me-2">Mode monochrome</span>
                    </label>
                </li>

                <li class="ms-3 c-checkbox" style="height: 1.6em;">
                    <input type="checkbox" id="is-anonymised" title="" class="me-2">
                    <label for="is-anonymised">
                        <span class="text-capitalize me-2" data-i18n="words.anonymize"></span><i data-i18n="[title]classroom.activities.anonymise" class="fas fa-question-circle"></i>
                    </label>
                </li>
            </ul>
        </div>
    </div>
    <div id="classroom-info">
        <!-- title="Lien d'activation activé" -->
        <button class="btn c-btn-secondary" id="blocking-class-tooltip" class="blocking-class" onclick="toggleBlockClass()" data-bs-toggle="tooltip" data-i18n="[title]words.anonymize" >
            <i class="fa fa-lock-open"></i>
        </button>

        <div>
            <span data-i18n="classroom.activities.toCopy"></span>
            <span id="classroom-link-tocopy">
                <span style="display:none;" id="hidden-link-prefix"></span>
                <span class="classroom-link"></span>
            </span>
        </div>
        
        <button class="btn c-btn-secondary" class="blocking-class" onclick="navigatePanel('classroom-table-panel-teacher-code', 'dashboard-classes-teacher')" data-bs-toggle="tooltip" title="Afficher en plein écran">
            <i class="fa fa-expand"></i>
        </button>

    </div>

</div>


<div id="classroom-table-panel-teacher-code" style="display:none;" class="row dashboard-block classes-panel class-stats-panel">
    <div id="classroom-code-share-container">
        <button id="code-share-close-btn" onclick="backToClassroomFromCode()" class="btn c-btn-primary">
            <i class="fas fa-times"></i>
        </button>

        <div>
            <button id="return-to-add-student-modal" onclick="Main.getClassroomManager().returnToAddStudentModal()" class="btn c-btn-primary top-left-return-btn d-none">
                <span data-i18n="words.return">Retour</span>
            </button>
            <span data-i18n="classroom.activities.toCopy" class="mobile-mt-2"></span>
            <span class="classroom-link" id="classroom-link-share"></span>
            <span id="complete-classroom-link" class="complete-classroom-link"></span>
            <button id="code-copy" class="btn c-btn-secondary" title="Copier le lien direct" class="js-copy" data-target="#classroom-link-tocopy" data-i18n="classroom.classes.panel.copyLink">Copier le lien direct</button>
        </div>

        <div>
            <span data-i18n="classroom.activities.qrCode"></span> </br>
            <div id="classroom-code-share-qr-code">
                
            </div>
            <div class="my-3 d-flex justify-content-center flex-column gap-2">
                <button id="qr-copy" class="btn c-btn-secondary" title="Copier l'image" class="js-copy" data-i18n="classroom.classes.panel.copyImage">Copier l'image</button>
                <button id="qr-download" class="btn c-btn-secondary" title="Téléverser l'image" class="js-copy" data-i18n="classroom.classes.panel.downloadImage">Téléverser l'image</button>
            </div>
        </div>
    </div>
</div>
<div id="classroom-dashboard-activities-panel-teacher" style="display:none;" class="dashboard-block">
    <div class="d-flex justify-content-center c-primary-form row" style="margin: 0 auto;">


        <div class="col-12 col-lg-8 mt-2">
            <div class="d-flex flex-fill">

                <div class="dropdown mx-2 d-none" id="tags-panel">
                    <button class="btn c-btn-primary" style="width: auto;height: 3em;min-width: 3em;" type="button" id="dropdownTag" data-bs-auto-close="outside" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-filter"></i>
                        <span class="ms-1 d-none d-md-inline">Filtres</span>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownTag" id="dropdown-tags-filter">
                    </div>
                </div>
                <label for="filter-activity-input" class="visually-hidden">Rechercher une activité</label>
                <input type="search" id="filter-activity-input" data-i18n="[placeholder]manager.buttons.search" class="flex-fill">

                <button id="filter-activity" class="btn btn-primary" style="width: 3em;height: 3em;" aria-label="Lancer la recherche">
                    <i class="fas fa-search" aria-hidden="true"></i>
                </button>
            </div>
        </div>

        <div class="col-12 col-md-auto vertical-align-center mt-2 space-evenly">

            <div class="col-auto mx-auto mt-2">
                <select name="filter-activity-select" id="filter-activity-select" class="c-primary-form">
                    <option value="desc" data-i18n="classroom.filter.desc"></option>
                    <option value="asc" data-i18n="classroom.filter.asc"></option>

                    <option value="alph" data-i18n="classroom.filter.alph"></option>
                    <option value="ralph" data-i18n="classroom.filter.reverseAlph"></option>
                </select>
            </div>

            <div class="col-auto mt-2">
                <button class="btn c-btn-icon-only mx-1" onclick="foldersManager.displayModeSwitch('card')" id="switcherCard">
                    <img src="assets/media/folders/cadrillage.svg" alt="arb-folders" onload="SVGInject(this)">
                </button>
                <button class="btn c-btn-icon-only mx-1" onclick="foldersManager.displayModeSwitch('list')" id="switcherList">
                    <img src="assets/media/folders/arborescence.svg" alt="arb-folders" onload="SVGInject(this)">
                </button>
            </div>
        </div>
    </div>

    <div class="buttons-interactions flex-wrap d-inline-flex col-12 mt-3">
        <button id="new-activity-panel-1" onclick="showExercicePanel()" class=" btn c-btn-outline-secondary"><span class="me-1" data-i18n="classroom.activities.add"></span><i class="fas fa-chevron-right"></i>
        </button>

        <button id="new-activity-panel-2" onclick="coursesManager.showCoursePanel()" class="btn c-btn-outline-primary"><span class="me-1" data-i18n="courses.add">Créer un parcours</span><i class="fas fa-chevron-right"></i>
        </button>

        <button class="btn c-btn-icon-only" id="new-activities-folder" onclick="foldersManager.openFolderModal()">
            <img src="assets/media/folders/createFolder.svg" alt="folders" onload="SVGInject(this)">
        </button>
        <button class="btn c-btn-icon-only" onclick="foldersManager.seekFolderModal()">
            <img src="assets/media/folders/folder_tree.svg" alt="arb-folders" onload="SVGInject(this)" style="height: 30px;">
        </button>

        <button id="new-activity-panel-3" onclick="importActivityFromJSON()" class="btn c-btn-no-outline-primary ms-auto">
            <span class="me-1" data-i18n="newActivities.import">Importer une activité</span><i class="fas fa-download"></i>
        </button>
    </div>

    <div id="list-activities-teacher">

    </div>
</div>

<div id="classroom-dashboard-activities-panel-library-teacher" style="display:none;" class="dashboard-block">
</div>

<div id="classroom-dashboard-new-activity-panel2" style="display:none;" class="dashboard-block class-creation-form-step2">

    <nav class="form-activity-container" style="margin: 0 auto;">
        <div class="col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.1"></span>
        </div>

        <div class="col-4"></div>

        <div class="col text-center">
            <span class="form-activity form-activity-activate">2</span>
            <span data-i18n="classroom.activities.form.2"></span>
        </div>
    </nav>

    <div class="text-center px-1">
        <h3 class="c-text-primary text-uppercase font-weight-bold" data-i18n="classroom.activities.form.success"></h3>
    </div>

    <div class="container text-center">
        <div class="row my-2">
            <div class="col-sm mb-2">
                <button id="new-activity-panel3" class="new-activity-panel3 btn c-btn-primary">
                    <span data-i18n="classroom.activities.form.attribute"></span> <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="col-sm mb-2">
                <button onclick="navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher')" class="btn c-btn-primary">
                    <span data-i18n="classroom.activities.form.return"></span> <i class="fas fa-chevron-right"></i>
                </button>
            </div>

        </div>
        <p data-i18n="classroom.activities.form.hint"></p>
        <button class="btn c-btn-outline-primary" onclick="showExercicePanel()" data-i18n="classroom.activities.form.modify"></button>
    </div>
</div>


<div id="classroom-dashboard-new-activity-panel3" style="display:none;" class="dashboard-block container">
    <nav class="form-activity-container mb-3" style="margin: 0 auto;">
        <div class="col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.1">Application</span>
        </div>

        <div class="col"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.2">Contenu</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.3">Titre</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class="col text-center">
            <span class="form-activity form-activity-activate">4</span>
            <span>Attribution</span>
        </div>
    </nav>
    <div class="assign-activity-container" style="margin: 0 auto;">

        <div class="row">
            <div class="col-12 mb-5 text-center">
                <button id="new-activity-attribute" class="btn c-btn-primary mt-5">
                    <span data-i18n="classroom.activities.form.select1"></span> <i class="fas fa-plus"></i>
                </button>
                <div class="mt-2">
                    (<span id="assign-total-student-number">0</span> <span data-i18n="classroom.activities.form.select2"></span>)
                </div>
            </div>
        </div>

        <!-- Submit multiple times -->
        <div class="row">
            <div class="col mb-5 text-center c-primary-form">
                <p id="hint-exist-disclaimer" data-i18n="[html]classroom.activities.hintExist" style="display:none;"></p>
            </div>
        </div>


        <div class="section-facultative-options">

            <div class="section-header-facultative-options" 
                 onclick="facultativeOptions()" 
                 role="button" 
                 tabindex="0" 
                 aria-label="Développer ou réduire les options facultatives" 
                 aria-expanded="false"
                 onkeydown="if(event.key==='Enter'||event.key===' '){ event.preventDefault(); event.stopPropagation(); facultativeOptions(); }">
                <i id="i-facultative-options" class="ms-2 fas fa-lg fa-chevron-up" aria-hidden="true"></i>
                <h3 class="section-title-facultative-options" data-i18n="classroom.activities.facultative">Options facultatives</h3>
            </div>

            <div id="facultative-options" style="display: none;">
                <div class="container mt-3 pt-1" id="facultative">

                                        <!-- Autocorrect activation -->
                    <div class="row" id="form-add-date">
                        <div class="col mb-5 text-center c-primary-form assign-row">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="isDate-activity-form">
                                <label for="isDate-activity-form" class="form-check-label" data-i18n="classroom.activities.form.addDateActivity"></label>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 col-xl-6 c-primary-form assign-activity-calendar">
                            <div class="row">
                                <div class="col-6 text-end align-middle">
                                    <label for="date-begin-activity-form" data-i18n="classroom.activities.form.dateBegin"></label>
                                </div>
                                <div class="col-6 text-start">
                                    <input type="date" id="date-begin-activity-form">
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-xl-6 c-primary-form assign-activity-calendar">
                            <div class="row">
                                <div class="col-6 text-end align-middle">
                                    <label for="date-end-activity-form" data-i18n="classroom.activities.form.dateEnd"></label>
                                </div>
                                <div class="col-6 text-start">
                                    <input type="date" id="date-end-activity-form">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Instructions -->
                    <div class="row mt-3">
                        <div class="col-12 mb-5 text-center c-primary-form">
                            <label for="introduction-activity-form">
                                <b data-i18n="classroom.activities.form.instructions"></b>
                                <i data-i18n="words.optional"></i>
                            </label></br>
                            <textarea rows="4" id="introduction-activity-form"></textarea>
                        </div>
                    </div>


                    
                    <div class="assign-row">
                        <div>
                            <label for="isEval-activity-form" data-i18n="classroom.activities.form.nature"></label>
                            <div class="switcher w-fit-content mx-auto">
                                <input type="radio" name="isEval-activity-form" class="switcher__input switcher__input--left" value="false" id="isExo-activity-form" checked=""/>
                                <label for="isExo-activity-form" class="switcher__label text-capitalize" data-i18n="words.yes">Oui</label>
                            
                                <input type="radio" name="isEval-activity-form" class="switcher__input switcher__input--right" value="true" id="isEval-activity-form"/>
                                <label for="isEval-activity-form" class="switcher__label text-capitalize" data-i18n="words.no">Non</label>
                            
                                <span class="switcher__toggle"></span>
                            </div>
                        </div>
                    </div>


                    <!-- Autocorrect activation -->
                    <div class="row" id="form-autocorrect">
                        <div class="col mb-5 text-center c-primary-form assign-row">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="isAutocorrection-activity-form" onclick="autocorrectSwitch()">
                                <label for="isAutocorrection-activity-form" class="form-check-label" data-i18n="classroom.activities.form.autocorrect"></label>
                            </div>
                            <i class="fas fa-info assign-info-icon" id="infoAutocorrect" data-bs-toggle="tooltip" title=""></i>
                        </div>
                    </div>

                    <!-- Activity RetroAttribution  -->
                    <div class="row" id="form-retro-attribution">
                        <div class="col mb-5 text-center c-primary-form assign-row">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="retro-attribution-activity-form">
                                <label class="form-check-label" for="retro-attribution-activity-form" data-i18n="classroom.activities.form.retroAttribution"></label>
                            </div>

                            <i class="fas fa-info assign-info-icon" id="infoRetroAttribution" data-bs-toggle="tooltip" title=""></i>
                        </div>
                    </div>

                </div>
            </div>
        </div>


        <div class="row text-center my-2 mt-5">
            <div class="col-sm mb-2">
                <button class="btn c-btn-grey" onclick="navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher')">
                    <i class="fas fa-angle-left"></i> <span class="text-capitalize" data-i18n="words.return"></span>
                </button>
            </div>

            <div class="col-sm order-first order-sm-last mb-2">
                <button id="attribute-activity-to-students" class="btn c-btn-primary" disabled>
                    <span data-i18n="classroom.activities.form.attribute2"></span><i class="fas fa-angle-right"></i>
                </button>
            </div>
        </div>



    </div>
</div>
<div id="classroom-dashboard-help-panel-teacher" style="display:none;" class="dashboard-block help-panel">
    <div class="contact-panel">

        <h3 data-i18n="classroom.teacherHelpPanel.contactForm.title" class="title-margin">Contacter Vittascience</h3>

        <div id="about-contact-info">

            <form id="about-contact-form" class="c-primary-form">
                <div class="form-group">
                    <input type="text" name="subject" class="form-control" id="contact-subject-input" data-i18n="[placeholder]classroom.teacherHelpPanel.contactForm.objectPlaceholder" placeholder="Objet">
                </div>

                <div class="form-group">
                    <textarea name="message" id="contact-message-input" class="form-control my-2" rows="8" cols="25" style="resize: none;" data-i18n="[placeholder]classroom.teacherHelpPanel.contactForm.messagePlaceholder" placeholder="Écrivez votre message ici. (Maximum 800 caractères)"></textarea>
                </div>

                <input type="submit" class="btn c-btn-primary" data-i18n="[value]classroom.teacherHelpPanel.contactForm.sendButton" disabled="disabled" style="cursor:not-allowed;float: right;">
            </form>
        </div>
        <br>
        <div id="footer-content">
            <p>
                <a class="footer-link text-uppercase" href="/classroom/privacy.php" target="_blank" data-i18n="[html]classroom.footer.privacy"></a>
            </p>
            <p>
                <a class="footer-link text-uppercase" href="/classroom/cgu.php" target="_blank" data-i18n="[html]classroom.footer.cgu"></a>
            </p>
            <p>
                <a class="footer-link text-uppercase" href="/classroom/legal.php" target="_blank" data-i18n="[html]classroom.footer.legal"></a>
            </p>
            <p data-i18n="classroom.footer.copyright">
            </p>
        </div>
    </div>
    
    <div class="faq-panel">
        <h2 class="c-text-secondary font-weight-bold text-center mt-3">FAQ</h2>
        <div id="teacher-faq-container"></div>
    </div>

</div>
<div id="groupadmin-dashboard-help" style="display:none;" class="dashboard-block help-panel">

    <div class="contact-panel">
        <h3 data-i18n="classroom.teacherHelpPanel.contactForm.title" class="title-margin"></h3>

        <div id="groupadmin-about-contact-info">
            <form id="groupadmin-about-contact-form" class="c-primary-form">
                <div class="form-group">

                    <input type="text" name="subject" class="form-control" id="groupadmin-contact-subject-input" data-i18n="[placeholder]classroom.teacherHelpPanel.contactForm.objectPlaceholder" placeholder="Objet">
                </div>
                <div class="form-group">

                    <textarea name="message" class="form-control" id="groupadmin-contact-message-input" rows="8" cols="25" style="resize: none; width: 100%;" data-i18n="[placeholder]classroom.teacherHelpPanel.contactForm.messagePlaceholder" placeholder="Écrivez votre message ici. (Maximum 800 caractères)"></textarea>
                </div>

                <input type="button" data-i18n="[value]classroom.teacherHelpPanel.contactForm.sendButton" style="cursor:not-allowed;" id="btn-help-for-groupAdmin" disabled class="btn btn-lg login-button c-btn-primary">
            </form>
        </div>
        <br>
        <div id="footer-content">
            <p>
                <a class="footer-link text-uppercase" href="/classroom/privacy.php" target="_blank" data-i18n="[html]classroom.footer.privacy"></a>
            </p>
            <p>
                <a class="footer-link text-uppercase" href="/classroom/cgu.php" target="_blank" data-i18n="[html]classroom.footer.cgu"></a>
            </p>
            <p>
                <a class="footer-link text-uppercase" href="/classroom/legal.php" target="_blank" data-i18n="[html]classroom.footer.legal"></a>
            </p>
            <p data-i18n="classroom.footer.copyright">
            </p>
        </div>
    </div>
    <!-- <div class="faq-panel">
        <h2 class="c-text-secondary font-weight-bold text-center mt-5">FAQ</h2>
        <div id="groupadmin-faq-container"></div>
    </div> -->
</div>
<div id="classroom-dashboard-profil-panel-groupadmin" class="dashboard-block profile-panel" style="display:none;">

    <div class="d-flex flex-column text-center">
        <img src="assets/media/profile_picture.svg" alt="Photo de profil" class="user-picture">
        <span id="user-name-groupadmin" class="mt-4" data-i18n="classroom.profil.identity">PLACEHOLDER</span>
    </div>

    <div class="d-flex flex-column" style="gap: 1.5em;">
        <button class="btn c-btn-outline-primary" id="settings-groupadmin"><span class="text-capitalize text-span-initial" data-i18n="words.settings" class="text-capitalize"></span> <i class="fas fa-cog"></i>
        </button>

        <button class="btn c-btn-outline-primary" onclick="switchToProf()"><span data-i18n="classroom.profil.switchModeTeacher" class="text-span-initial me-1"></span><i class="fas fa-exchange-alt"></i></button>

        <button class="btn c-btn-red" onclick="goToDisconnect('classroom');"><span data-i18n="words.disconnect" class="text-capitalize text-span-initial"></span>
            <i class="fas fa-power-off"></i>
        </button>
    </div>
</div>
<div id="groupadmin-dashboard-users" style="display:none;" class="dashboard-block mt-2">
    <div class="d-flex justify-content-center c-primary-form " style="margin: 0 auto;">
        <div class="container-fluid px-5">
            <div class="row">
                <div class="row mb-2" id="btn-create-groupadmin">
                    <button class="btn c-btn-outline-secondary mx-1" id="create_user_link_to_group_groupadmin">
                        <span data-i18n="manager.buttons.user.createA">Créer un utilisateur</span>
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            <!-- Div alert when application has expired -->
            <div id="info-group-applications" class="alert alert-danger text-center" style="display:none;"></div>
            <div class="row mb-2 c-primary-form" id="users_options_groupadmin">
                <!-- Search bar -->
                <div class="col col-md-6 col-lg-8 d-flex align-items-center">
                    <input class="flex-fill" type="search" id="name_user_search_groupadmin" placeholder="Rechercher" aria-label="Search" data-i18n="[placeholder]manager.buttons.search">
                    <button class="btn c-btn-primary" id="search_user_groupadmin" style="width: 3em; height: 3em;" aria-label="Rechercher des utilisateurs">
                        <i class="fas fa-search" aria-hidden="true"></i>
                    </button>
                </div>

                <!-- View filter -->
                <div class="col-md row">
                    <div class="col-12">
                      <select class="form-select  w-100" id="sort_users_filter_groupadmin" aria-label="Trier les utilisateurs">
                        <option selected value="0" data-i18n="manager.sort.user.bylastname">Trier par nom</option>
                        <option value="1" data-i18n="manager.sort.user.byfirstname">Trier par prénom</option>
                      </select>
                    </div>

                    <div class="col-12">
                        <label for="users_per_page" data-i18n="manager.users.usersPerPage">Utilisateurs par page</label>
                        <select name="users_per_page" id="users_per_page_groupadmin" class="my-1 form-select">
                            <option value="100">100</option>
                            <option value="250">250</option>
                            <option value="500">500</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row" id="groupadmin_groups">
                <table class="table c-table">
                    <thead>
                        <tr>
                            <th scope="col" data-i18n="manager.table.group">Groupe</th>
                            <th scope="col" data-i18n="manager.table.description">Description</th>
                            <th scope="col" data-i18n="manager.table.applications">Applications</th>
                            <th scope="col" data-i18n="manager.table.link">Lien</th>
                        </tr>
                    </thead>
                    <tbody id="groups_table_groupadmin">
                    </tbody>
                </table>
            </div>

            <div id="table_details_users_groupadmin">
                <div class="group-header row my-2">
                    <h2 id="group_name_from_table_groupadmin"></h2>
                </div>

                <p data-i18n="manager.title.activeUsers" class="font-weight-bold">PH Inactive users table PH</p>
                <table class="table c-table">
                    <thead>
                        <tr>
                            <th scope="col" data-i18n="manager.table.lastname">Nom</th>
                            <th scope="col" data-i18n="manager.table.firstname">Prénom</th>
                            <th scope="col" data-i18n="manager.table.right">Rôle</th>
                            <th scope="col" data-i18n="manager.table.applications">Applications</th>
                            <th scope="col" data-i18n="manager.table.resetPassword">Régénérer le mot de passe</th>
                            <th scope="col" data-i18n="manager.buttons.update">Modifier</th>
                            <th scope="col" data-i18n="manager.buttons.disable">Supprimer</th>
                        </tr>
                    </thead>
                    <tbody id="table_info_group_data_groupadmin">
                    </tbody>
                </table>

                <p data-i18n="manager.title.inactiveUsers" class="font-weight-bold">PH Inactive users table PH</p>
                <table class="table c-table">
                    <thead>
                        <tr>
                            <th scope="col" data-i18n="manager.table.lastname">Nom</th>
                            <th scope="col" data-i18n="manager.table.firstname">Prénom</th>
                            <th scope="col" data-i18n="manager.table.right">Rôle</th>
                            <th scope="col" data-i18n="manager.table.applications">Applications</th>
                            <th scope="col" data-i18n="manager.table.resetPassword">Régénérer le mot de passe</th>
                            <th scope="col" data-i18n="manager.buttons.update">Modifier</th>
                            <th scope="col" data-i18n="manager.buttons.activate">Activer</th>
                        </tr>
                    </thead>
                    <tbody id="table_info_group_data_groupadmin_inactive">
                    </tbody>
                </table>


                <nav id="paginationButtons_users_groupadmin" class="m-auto">

                </nav>
            </div>
        </div>
    </div>
</div>
<div id="groupadmin-apps-main" class="dashboard-block mt-2" style="display: none;">
    <div class="container">
        <div class="col-12">
            <div id="update-applications-modal">
                <div class="row" id="group-monitoring">

                    <h6 class="form-check-label font-weight-bold mb-1" style="color: var(--classroom-primary)" data-i18n="manager.apps.monitoringGroup"></h6>
                    <table class="table c-table">
                        <thead>
                            <tr></tr>
                                <th scope="col" data-i18n="manager.table.status">outDated</th>
                                <th scope="col" data-i18n="manager.table.dateBegin">dateBegin</th>
                                <th scope="col" data-i18n="manager.table.dateEnd">dateEnd</th>
                                <th scope="col" data-i18n="manager.table.maxStudents">maxStudents</th>
                                <th scope="col" data-i18n="manager.table.actualStudents">actualStudents</th>
                                <th scope="col" data-i18n="manager.table.maxTeachers">maxTeachers</th>
                                <th scope="col" data-i18n="manager.table.actualTeachers">actualTeachers</th>
                                <th scope="col" data-i18n="manager.table.maxStudentsPerTeachers">maxStudentsPerTeacher</th>
                            </tr>
                        </thead>
                        <tbody id="group-monitoring-global-body">
                        </tbody>
                    </table>

                    <h6 class="form-check-label font-weight-bold mb-1 mt-4" style="color: var(--classroom-primary)" data-i18n="manager.apps.monitoringApps"></h6>
                    <table class="table c-table">
                        <thead>
                            <tr>
                                <th scope="col" data-i18n="manager.table.activityType">Type d'activité</th>
                                <th scope="col" data-i18n="manager.table.maxActivitiesPerGroup">Max par groupe</th>
                                <th scope="col" data-i18n="manager.table.actualTeachers">actualTeachers</th>
                                <th scope="col" data-i18n="manager.table.maxActivitiesPerTeacher">Max par enseignant</th>
                            </tr>
                        </thead>
                        <tbody id="group-monitoring-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="classroom-dashboard-profil-panel-manager" class="dashboard-block profile-panel" style="display:none;">

    <div class="d-flex flex-column text-center">
        <img src="assets/media/profile_picture.svg" alt="Photo de profil" class="user-picture">
        <span id="user-name-manager" class="mt-4" data-i18n="classroom.profil.identity">PLACEHOLDER</span>
    </div>

    <div class="d-flex flex-column" style="gap: 1.5em;">
        <button class="btn c-btn-outline-primary" id="settings-manager"><span class="text-capitalize text-span-initial" data-i18n="words.settings" class="text-capitalize"></span> <i class="fas fa-cog"></i>
        </button>

        <button class="btn c-btn-outline-primary" onclick="switchToProf()"><span data-i18n="classroom.profil.switchModeTeacher" class="text-span-initial me-1"></span><i class="fas fa-exchange-alt"></i></button>

        <button class="btn c-btn-red" onclick="goToDisconnect('classroom');"  data-testid="classroomLogoutBtn"><span data-i18n="words.disconnect" class="text-capitalize text-span-initial"></span>
            <i class="fas fa-power-off"></i>
        </button>
    </div>
</div>
<div id="manager-apps-main" class="dashboard-block" style="display: none;">
    <div class="container-fluid px-5">
        <div class="col-12">
            <div id="update-applications-modal">

                <div class="col-12" id="default-restrictions">
                    <h3 data-i18n="manager.apps.defaultRestrictions">Restrictions par defaut</h3>
                    <table class="table c-table">
                        <thead>
                            <tr>
                                <th scope="col" data-i18n="manager.table.name">Name</th>
                                <th scope="col" data-i18n="manager.table.restrictions">Restrictions</th>
                                <th scope="col" data-i18n="manager.buttons.update">Modifier</th>
                            </tr>
                        </thead>
                        <tbody id="all-default-restrictions">

                        </tbody>
                    </table>
                </div>

                <div class="col-12" id="all-applications">
                    <div>
                        <button class="btn c-btn-outline-primary mx-1" onclick="createApp()">
                            <span data-i18n="manager.apps.create"></span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <table class="table c-table">
                        <thead>
                            <tr>
                                <th scope="col" data-i18n="manager.table.image">Image</th>
                                <th scope="col" data-i18n="manager.table.name">Name</th>
                                <th scope="col" data-i18n="manager.table.description">Description</th>
                                <th scope="col" data-i18n="manager.table.restriction">Restriction</th>
                                <th scope="col" data-i18n="manager.buttons.update">Modifier</th>
                                <th scope="col" data-i18n="manager.buttons.delete">Supprimer</th>
                            </tr>
                        </thead>
                        <tbody id="all-applications-crud">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="manager-dashboard-main" style="display:none;" class="dashboard-block">
    <div class="d-flex justify-content-center" style="margin: 0 auto;">

        <div class="container-fluid px-5">
            <div class="row mb-2 c-primary-form" id="groups_options">

                <!-- Search bar -->
                <div class="col col-md-6 col-lg-8 d-flex align-items-center" role="search" aria-labelledby="group-search-label">
                    <label for="name_group_search" id="group-search-label" class="sr-only">Rechercher des groupes</label>
                    <input class="flex-fill" type="search" id="name_group_search" placeholder="Rechercher" 
                           aria-label="Rechercher des groupes par nom ou description" 
                           data-i18n="[placeholder]manager.buttons.search"
                           aria-describedby="group-search-description">
                    <button class="btn c-btn-primary" id="search_group" style="width: 3em; height: 3em;" 
                            aria-label="Lancer la recherche de groupes"
                            onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();document.getElementById('search_group').click();}">
                      <i class="fas fa-search" aria-hidden="true"></i>
                    </button>
                    <span id="group-search-description" class="sr-only">Appuyez sur Entrée pour rechercher ou cliquez sur le bouton de recherche</span>
                </div>

                <!-- View filter -->
                <div class="col-md  d-flex flex-column">
                    <div class="col-12">
                        <select class="form-select w-100" id="sort_groups_filter" aria-label="Trier les groupes">
                            <option selected value="0" data-i18n="manager.sort.group.byname">Trier par nom</option>
                            <option value="1" data-i18n="manager.sort.group.bydesc">Trier par description</option>
                        </select>
                    </div>

                    <div class="d-flex">
                        <label for="groups_per_page" data-i18n="manager.group.groupsPerPage">Groupes par page</label>
                        <select name="groups_per_page" id="groups_per_page" class="my-1 form-select">
                            <option value="100">100</option>
                            <option value="250">250</option>
                            <option value="500">500</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="mb-2" id="btn-create-manager">
                <button class="btn c-btn-outline-primary mx-1" id="create_group_manager"
                        aria-label="Créer un nouveau groupe d'utilisateurs"
                        onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();document.getElementById('create_group_manager').click();}">
                    <span data-i18n="manager.group.create">Créer un groupe</span> <i class="fas fa-chevron-right" aria-hidden="true"></i>
                </button>
                <button class="btn c-btn-outline-secondary mx-1" id="create_user_link_to_group_manager"
                        aria-label="Créer un nouvel utilisateur"
                        onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();document.getElementById('create_user_link_to_group_manager').click();}">
                    <span data-i18n="manager.users.create">Créer un utilisateur</span> <i class="fas fa-chevron-right" aria-hidden="true"></i>
                </button>
            </div>

            <div id="table_details_admins">
                <table class="table c-table">
                    <thead>
                        <tr>
                            <th scope="col" data-i18n="manager.table.group">Groupe</th>
                            <th scope="col" data-i18n="manager.table.description">Description</th>
                            <th scope="col" data-i18n="manager.table.applications">Applications</th>
                            <th scope="col" data-i18n="manager.table.nbUsers">Nombre d'utilisateurs</th>
                            <th scope="col" data-i18n="manager.buttons.update">Modifier</th>
                            <th scope="col" data-i18n="manager.buttons.delete">Supprimer</th>
                        </tr>
                    </thead>
                    <tbody id="groups_table_manager">
                    </tbody>
                </table>
            </div>

            <div id="table_details_users" class="c-primary-form" style="display: none;">
                <div class="row mb-2 c-primary-form" id="users_options">

                    <!-- Search bar -->
                    <div class="col col-md-6 col-lg-8 d-flex align-items-center" role="search" aria-labelledby="user-search-label">
                        <label for="name_user_search" id="user-search-label" class="sr-only">Rechercher des utilisateurs</label>
                        <input class="flex-fill" type="search" id="name_user_search" 
                               data-i18n="[placeholder]manager.buttons.search" placeholder="Rechercher" 
                               aria-label="Rechercher des utilisateurs par nom ou prénom"
                               aria-describedby="user-search-description">
                        <button class="btn c-btn-primary" id="search_user" style="width: 3em; height: 3em;" 
                                aria-label="Lancer la recherche d'utilisateurs"
                                onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();document.getElementById('search_user').click();}">
                            <i class="fas fa-search" aria-hidden="true"></i>
                        </button>
                        <span id="user-search-description" class="sr-only">Appuyez sur Entrée pour rechercher ou cliquez sur le bouton de recherche</span>
                    </div>
                
                    <!-- View filter -->
                    <div class="col-md d-flex flex-column">
                        <div class="col-12">
                            <select class="form-select w-100" id="sort_users_filter" aria-label="Trier les utilisateurs">
                                <option selected value="0" data-i18n="manager.sort.user.bylastname">Trier par nom</option>
                                <option value="1" data-i18n="manager.sort.user.byfirstname">Trier par prénom</option>
                            </select>
                        </div>
                
                        <div class="d-flex">
                            <label for="users_per_page" data-i18n="manager.users.usersPerPage">Utilisateurs par page</label>
                            <select name="users_per_page" id="users_per_page" class="my-1 form-select">
                                <option value="100">100</option>
                                <option value="250">250</option>
                                <option value="500">500</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row my-2 group-header">
                    <button class="btn btn-sm c-btn-grey" id="table_back_to_users" 
                            aria-label="Retour à la liste des groupes"
                            onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();document.getElementById('table_back_to_users').click();}">
                        <i class="fas fa-arrow-left" aria-hidden="true"></i>
                    </button>
                    <h2 id="group_name_from_table"></h2>
                </div>

                <p data-i18n="manager.title.activeUsers" id="active-users-manager" class="font-weight-bold">PH Inactive users table PH</p>
                <table class="table c-table">
                    <thead>
                        <tr>
                            <th scope="col" data-i18n="manager.table.lastname">Nom</th>
                            <th scope="col" data-i18n="manager.table.firstname">Prénom</th>
                            <th scope="col" data-i18n="manager.table.right">Rôle</th>
                            <th scope="col" data-i18n="manager.table.applications">Applications</th>
                            <th scope="col" data-i18n="">Premium</th>
                            <th scope="col" data-i18n="manager.table.resetPassword">Régénérer le mot de passe</th>
                            <th scope="col" data-i18n="manager.buttons.update">Modifier</th>
                            <th scope="col" data-i18n="manager.buttons.disable">Supprimer</th>
                        </tr>
                    </thead>
                    <tbody id="table_info_group_data">

                    </tbody>
                </table>

                <p data-i18n="manager.title.inactiveUsers" id="inactive-users-manager" class="font-weight-bold">PH Inactive users table PH</p>
                <table class="table c-table">
                    <thead>
                        <tr>
                            <th scope="col" data-i18n="manager.table.lastname">Nom</th>
                            <th scope="col" data-i18n="manager.table.firstname">Prénom</th>
                            <th scope="col" data-i18n="manager.table.right">Rôle</th>
                            <th scope="col" data-i18n="manager.table.applications">Applications</th>
                            <th scope="col" data-i18n="">Premium</th>
                            <th scope="col" data-i18n="manager.table.resetPassword">Régénérer le mot de passe</th>
                            <th scope="col" data-i18n="manager.buttons.update">Modifier</th>
                            <th scope="col" data-i18n="manager.buttons.delete">Supprimer</th>
                        </tr>
                    </thead>
                    <tbody id="table_info_group_data_inactive">

                    </tbody>
                </table>

                <nav id="paginationButtons_users" class="m-auto">

                </nav>
            </div>

            <div class="row">
                <div id="paginationButtons_groups" class="m-auto">

                </div>
            </div>
        </div>
    </div>
</div>
<!-- content part -->
<div id="classroom-dashboard-classes-new-activity" style="display:none;" class="dashboard-block classes-panel">
    <nav class="form-activity-container" style="margin: 0 auto;">
        <div class="col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.1">Application</span>
        </div>

        <div class="col"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-activate">2</span>
            <span data-i18n="classroom.activities.form.2">Contenu</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-desactivate">3</span>
            <span data-i18n="classroom.activities.form.3">Titre</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class="col text-center">
            <span class="form-activity form-activity-desactivate">4</span>
            <span data-i18n="classroom.activities.form.4">Attribution</span>
        </div>
    </nav>

    <div class="container my-3 mx-auto part-content-index c-primary-form">

        <!-- Free activity part -->
        <div id="activity-free" style="display:none;">
            <div class="content">
                <label for="free-content" data-i18n="[html]newActivities.content">Contenu de l'activité</label>
                <textarea id="free-content" style="height:340px"></textarea>
            </div>
           
            <div class="c-checkbox mt-2" tabindex="0" aria-labelledby="free-autocorrect-label" aria-describedby="free-autocorrect-description">
                <input type="checkbox" name="free-autocorrect" id="free-autocorrect" aria-describedby="free-autocorrect-description">
                <label for="free-autocorrect" id="free-autocorrect-label" data-i18n="newActivities.autocorrect">Autocorrection</label>
                <span id="free-autocorrect-description" class="sr-only">Cochez cette case pour activer l'autocorrection de cette activité</span>
                <span id="free-autocorrect-status" class="sr-only" aria-live="polite">Désactivée</span>
            </div>

            <div class="content" id="free-correction-content" style="display: none;">
                <label for="free-correction" data-i18n="newActivities.correction">Correction de l'activité</label>
                <textarea id="free-correction" style="height:340px"></textarea>

                <div class="content">
                    <p>
                        <span data-i18n="newActivities.tolerance1"></span>
                        <button id="free-tolerance-decrease" class="tolerance-btn" aria-label="Diminuer la tolérance">
                            <i class="fas fa-minus" aria-hidden="true"></i>
                        </button>
                        <input type="number" id="free-tolerance" value="0">
                        <button id="free-tolerance-increase" class="tolerance-btn" aria-label="Augmenter la tolérance">
                            <i class="fas fa-plus" aria-hidden="true"></i>
                        </button>
                        <span data-i18n="newActivities.tolerance2"></span></p>
                </div>
            </div>


        </div>

        <!-- Reading activity part -->
        <div id="activity-reading" style="display:none;">
            <div class="content mb-3">
                <label for="reading-content" class="tutorial-label">
                    <span data-i18n="[html]newActivities.content"></span>
                </label>
                <textarea id="reading-content" class='part-content' style="height:400px"></textarea>
            </div>
        </div>

        <!-- Quiz activity part -->
        <div id="activity-quiz" style="display:none;">

            <div class="content">
                <label for="quiz-states" data-i18n="[html]newActivities.states">Énoncé de l'activité</label>
                <textarea id="quiz-states" style="height:150px"></textarea>
            </div>

            <div id="quiz-content-edit" class="content mt-3">


                <div id="quiz-suggestions-container">
                    <div class="form-group c-primary-form" id="quiz-group-1">
                        <div class="row my-1">
                            <div class="col">
                                <label for="quiz-suggestion-1" id="quiz-label-suggestion-1">Proposition 1</label>
                                <button class="btn c-btn-secondary mx-2" data-i18n="newActivities.delete" id="quiz-button-suggestion-1" onclick="quizManager.deleteQuizSuggestion(1)">Delete</button>
                            </div>

                            <div class="col-md-auto d-flex align-items-center">
                                <div class="form-check" tabindex="0" aria-labelledby="quiz-checkbox-1-label" aria-describedby="quiz-checkbox-1-description">
                                    <input class="form-check-input" type="checkbox" id="quiz-checkbox-1" aria-describedby="quiz-checkbox-1-description">
                                    <label class="form-check-label" for="quiz-checkbox-1" id="quiz-checkbox-1-label" data-i18n="classroom.activities.correctAnswer">
                                        Réponse correcte
                                    </label>
                                    <span id="quiz-checkbox-1-description" class="sr-only">Cochez cette case pour marquer cette proposition comme réponse correcte</span>
                                    <span id="quiz-checkbox-1-status" class="sr-only" aria-live="polite">Désactivée</span>
                                </div>
                            </div>

                        </div>
                        <textarea id="quiz-suggestion-1" style="height:100px"></textarea>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <label for="quiz-hint" data-i18n="[html]newActivities.hint">Indice</label>
                    <textarea id="quiz-hint" class="form-control" style="height:140px"></textarea>
                </div>

            </div>

            <div class="content">
                <button data-i18n="newActivities.addQuiz" class="btn c-btn-primary mt-3" onclick="quizManager.addQuizSuggestion()">Ajouter une proposition</button>
            </div>

        </div>


        <!-- FillIn activity part -->
        <div id="activity-fill-in" style="display:none;">

            <div class="content">
                <label for="fill-in-states" data-i18n="[html]newActivities.states">Énoncé de l'activité</label>
                <textarea id="fill-in-states" style="height:150px"></textarea>
            </div>

            <div class="content mt-3 mb-0">
                <label for="fill-in-content" data-i18n="[html]newActivities.content">Contenu de l'activité</label>
                <textarea id="fill-in-content" style="height:400px"></textarea>
            </div>

            <button class="btn c-btn-primary mb-3" id="fill-in-add-inputs" data-bs-toggle="tooltip" title="">
                <i class="fas fa-pen-alt"></i>
                <span data-i18n="[html]newActivities.addField"></span>
            </button>

            <div class="content">
                <p>
                    <span data-i18n="newActivities.tolerance1"></span>
                    <button id="fill-in-tolerance-decrease" class="tolerance-btn" aria-label="Diminuer la tolérance">
                        <i class="fas fa-minus" aria-hidden="true"></i>
                    </button>
                    <input type="number" id="fill-in-tolerance" value="0">
                    <button id="fill-in-tolerance-increase" class="tolerance-btn" aria-label="Augmenter la tolérance">
                        <i class="fas fa-plus" aria-hidden="true"></i>
                    </button>
                    <span data-i18n="newActivities.tolerance2"></span>
                </p>
            </div>

            <div class="content form-group mb-3">
                <label for="fill-in-hint" data-i18n="[html]newActivities.hint">Indice</label>
                <textarea id="fill-in-hint"  class="form-control" style="height:140px"></textarea>
            </div>

        </div>

        <!-- DragAndDrop activity part -->
        <div id="activity-drag-and-drop" style="display:none;">

            <div class="content">
                <label for="drag-and-drop-states" data-i18n="[html]newActivities.states">Énoncé de l'activité</label>
                <textarea id="drag-and-drop-states" style="height:150px"></textarea>
            </div>

            <div class="content mt-3 mb-0">
                <label for="drag-and-drop-content" data-i18n="[html]newActivities.content">Contenu de l'activité</label>
                <textarea id="drag-and-drop-content" style="height:400px"></textarea>
            </div>

            <button class="btn c-btn-primary" id="dragAndDrop-add-inputs" data-bs-toggle="tooltip" title="">
                <i class="fas fa-pen-alt"></i>
                <span data-i18n="newActivities.addField">Add field</span>
            </button>

            <div class="content form-group mb-3">
                <label for="drag-and-drop-hint" data-i18n="[html]newActivities.hint">Indice</label>
                <textarea id="drag-and-drop-hint"  class="form-control" style="height:140px"></textarea>
            </div>

        </div>


        <!-- Custom & probably Lti -->
        <div id="activity-custom" style="display:none;">
            <div id="lti-loader-container"></div>
        </div>

        <div class="container">
            <div class="row text-center w-100 mt-1">
                <div class="col-sm mb-2">
                    <button class="btn c-btn-grey" onclick="contentBackward()">
                        <i class="fas fa-chevron-left"></i> <span data-i18n="classroom.activities.form.back"></span>
                    </button>
                </div>
                <div class="col-sm order-first order-sm-last mb-2">
                    <button id="content-forward-button" class="btn c-btn-secondary" onclick="contentForward()">
                        <span data-i18n="classroom.activities.form.buttonContinue"></span> <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- title part -->
<div id="classroom-dashboard-classes-new-activity-title" style="display:none;" class="dashboard-block ">
    <nav class="form-activity-container" style="margin: 0 auto;">
        <div class="col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.1">Application</span>
        </div>

        <div class="col"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.2">Contenu</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-activate">3</span>
            <span data-i18n="classroom.activities.form.3">Titre</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class="col text-center">
            <span class="form-activity form-activity-desactivate">4</span>
            <span data-i18n="classroom.activities.form.4">Attribution</span>
        </div>
    </nav>

    <div class="container">
        <div class="row mx-auto my-2 c-primary-form">
            <div class="col-xl-9 my-1 mx-auto">
                <label for="global_title" data-i18n="classroom.activities.form.title.label">Titre : </label>
                <input class="w-100" type="text" id="global_title">
            </div>


            <div class="col-xl-9 my-1 mx-auto d-none flex-column" id="tags-activities">
                <label>Ajouter des tags à votre activité</label>
                <div id="taglist" class="w-100 d-flex flex-wrap"></div>
                <div class="input-group mb-3">
                    <select id="taglist-select" class="form-control"></select>
                    <button id="add-tag-to-list" class="btn c-btn-primary">Ajouter le tag</button>
                </div>
            </div>
        </div>

        <div class="section-preview-activity" id="activity-preview-div">

            <div class="section-header-preview-activity" onclick="activityPreviewToggler()" tabindex="0" role="button" aria-label="Basculer la prévisualisation de l'activité" onkeydown="if(event.key === 'Enter' || event.key === ' ') { event.preventDefault(); activityPreviewToggler(); }">
                <i id="i-activity-preview" class="ms-2 fas fa-lg fa-chevron-up" aria-hidden="true"></i>
                <h3 class="section-title-preview-activity" data-i18n="classroom.activities.previewActivity">preview-activity</h3>
            </div>

            <div class="preview-container" id="activity-preview" style="display: none;">
                <h3 class="activity-title" id="preview-title" style="display: none;"></h3>
                
    
                <div id="preview-states" style="display: none;">
                    <label for="preview-activity-states" class="vitta-modal-title mt-2" data-i18n="classroom.activities.states">Énoncé de l'activité</label>
                    <p id="preview-activity-states"></p>
                </div>
    
    
                <div id="preview-content" style="display: none;">
                    <label for="preview-activity-content" id="label-activity-content" class="vitta-modal-title mt-2" data-i18n="newActivities.contentTitle">Contenu de l'activité</label>
                    <p id="preview-activity-content"></p>   
                </div>
    
    
                <div id="preview-content-bbcode" style="display: none;">
                    <label class="vitta-modal-title mt-2" for="preview-activity-bbcode-content" data-i18n="[html]newActivities.content"></label>
                    <textarea id="preview-activity-bbcode-content" style="height:400px"></textarea>
                </div>
    
                
                <div id="preview-activity-drag-and-drop-container" style="display: none;">
                    <label class="vitta-modal-title mt-2" data-i18n="newActivities.ActivitiesData.title.dragAndDrop">Drag & drop</label>
                    <div id="preview-drag-and-drop-text">
    
                    </div>
                     <div id="preview-drag-and-drop-fields" class="m-2 drag-and-drop-fields">
    
                    </div>
    
                </div>
            </div>

        </div>
        


        <div class="row text-center w-100 mt-1">
            <div class="col-sm mb-2">
                <button class="btn c-btn-grey" onclick="titleBackward()">
                    <i class="fas fa-chevron-left"></i> <span data-i18n="classroom.activities.form.back"></span>
                </button>
            </div>
            <div class="col-sm order-first order-sm-last mb-2">
                <button class="btn c-btn-secondary" onclick="titleForward()" id="activity-title-forward">
                    <span data-i18n="classroom.activities.form.validate"></span> <i class="fas fa-check"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Attribution part -->
<div id="classroom-dashboard-classes-new-activity-attribution" style="display:none;" class="dashboard-block class-creation-form-step2">

    <nav class="form-activity-container" style="margin: 0 auto;">
        <div class="col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.1">Application</span>
        </div>

        <div class="col"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.2">Contenu</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.3">Titre</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class="col text-center">
            <span class="form-activity form-activity-activate">4</span>
            <span>Attribution</span>
        </div>
    </nav>

    <!-- Success title -->
    <div class="text-center px-1">
        <h3 class="c-text-primary text-uppercase font-weight-bold" data-i18n="classroom.activities.form.success"></h3>
    </div>

    <div class="container text-center">
        <div class="row my-2">
            <div class="col-sm mb-2">
                <button id="attribute-activity" onclick="attributeActivity(0)" class="new-activity-panel3 btn c-btn-primary">
                    <span data-i18n="classroom.activities.form.attribute"></span> <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="col-sm mb-2">
                <button onclick="navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher')" class="btn c-btn-primary">
                    <span data-i18n="classroom.activities.form.return"></span> <i class="fas fa-chevron-right"></i>
                </button>
            </div>

        </div>
        <p data-i18n="classroom.activities.form.hint"></p>
        <button class="btn c-btn-outline-primary" onclick="activityModify(0)" data-i18n="classroom.activities.form.modify"></button>
    </div>
</div>


<div id="classroom-dashboard-proactivities-panel-teacher" style="display:none;" class="dashboard-block ">
    <nav class="form-activity-container" style="margin: 0 auto;">
        <div class="col text-center">
            <span class="form-activity form-activity-activate">1</span>
            <span data-i18n="classroom.activities.form.1">Application</span>
        </div>
        
        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>


        <div class=" col text-center">
            <span class="form-activity form-activity-desactivate">2</span>
            <span data-i18n="classroom.activities.form.2">Contenu</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-desactivate">3</span>
            <span data-i18n="classroom.activities.form.3">Titre</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class="col text-center">
            <span class="form-activity form-activity-desactivate">4</span>
            <span data-i18n="classroom.activities.form.4">Attribution</span>
        </div>
    </nav>
    <div id="activity-creation-grid"></div>

    <div class="row text-center" style="margin: 0 auto;">
        <div class="col">
            <button class="btn c-btn-grey" onclick="navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher')">
                <i class="fas fa-chevron-left"></i> <span data-i18n="classroom.activities.form.back">Retour</span>
            </button>
        </div>
        <!-- just here to keep the same space as the other return btn -->
        <div class="col"></div>
    </div>
</div>


<div id="classroom-dashboard-classes-new-activity-title" style="display:none;" class="dashboard-block ">
    <nav class="form-activity-container" style="margin: 0 auto;">
        <div class="col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.1">Application</span>
        </div>

        <div class="col"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.2">Contenu</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-activate">3</span>
            <span data-i18n="classroom.activities.form.3">Titre</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class="col text-center">
            <span class="form-activity form-activity-desactivate">4</span>
            <span data-i18n="classroom.activities.form.4">Attribution</span>
        </div>
    </nav>
</div>
<div id="app-media-galery" class="dashboard-block" style="display: none;">

    <nav class="form-activity-container" style="margin: 0 auto;">
        <div class="col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.1">Application</span>
        </div>

        <div class="col"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-activate">2</span>
            <span data-i18n="classroom.activities.form.2">Contenu</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-desactivate">3</span>
            <span data-i18n="classroom.activities.form.3">Titre</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class="col text-center">
            <span class="form-activity form-activity-desactivate">4</span>
            <span data-i18n="classroom.activities.form.4">Attribution</span>
        </div>
    </nav>


    <div class="d-flex flex-fill mx-auto mt-4 w-75 c-primary-form">
        <input type="search" name="apps-file-search" id="apps-file-search" class="flex-fill seach-app-galery" data-i18n="[placeholder]manager.buttons.search">
    </div>
    <div class="container app-media-galery mt-4 justify-content-center"  id="app-media-galery-container">
    </div>

    <nav aria-label="pagination" class="mx-auto mt-3 d-flex">
        <ul class="pagination mx-auto" id="app-media-galery-pagination"></ul>
    </nav>
</div>


<div id="classroom-dashboard-classes-custom-activity" style="display:none;" class="dashboard-block classes-panel">
    <nav class="form-activity-container" style="margin: 0 auto;">
        <div class="col text-center">
            <span class="form-activity form-activity-secondary"><i class="fas fa-check"></i></span>
            <span data-i18n="classroom.activities.form.1">Application</span>
        </div>

        <div class="col"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-activate">2</span>
            <span data-i18n="classroom.activities.form.2">Contenu</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class=" col text-center">
            <span class="form-activity form-activity-desactivate">3</span>
            <span data-i18n="classroom.activities.form.3">Titre</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <div class="col text-center">
            <span class="form-activity form-activity-desactivate">4</span>
            <span data-i18n="classroom.activities.form.4">Attribution</span>
        </div>
    </nav>

    <div class="container mb-2 mx-auto part-content-index c-primary-form">
        <!-- Graphonemo activity part -->
        <div id="activity-custom-content" class="activity-custom-content" class="mt-4" style="display:none;">
            
        </div>

        <div class="container">
            <div class="row text-center w-100 mt-1">
                <div class="col-sm mb-2">
                    <button class="btn c-btn-grey" onclick="contentBackward()">
                        <i class="fas fa-chevron-left"></i> <span data-i18n="classroom.activities.form.back"></span>
                    </button>
                </div>
                <div class="col-sm order-first order-sm-last mb-2">
                    <button id="content-forward-button" class="btn c-btn-secondary" onclick="contentForward()">
                        <span data-i18n="classroom.activities.form.buttonContinue"></span> <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Main page -->
<div id="classroom-dashboard-classes-new-course" style="display:none;" class="dashboard-block">
    
    
    <!-- Top progress bar  -->
    <nav class="form-activity-container" style="margin: 0 auto;">
        <!-- Step 1 -->
        <div class="col text-center">
            <span class="form-activity form-activity-activate">1</span>
            <span data-i18n="">Création du parcours</span>
        </div>

        <div class="col"></div>

        <!-- Step  -->
        <div class=" col text-center">
            <span class="form-activity form-activity-desactivate">2</span>
            <span data-i18n="">Titre</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <!-- Step 3 -->
        <div class=" col text-center">
            <span class="form-activity form-activity-desactivate">3</span>
            <span data-i18n="">Paramètres</span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <!-- Step 4 -->
        <div class="col text-center">
            <span class="form-activity form-activity-desactivate">4</span>
            <span data-i18n="classroom.activities.form.4">Attribution</span>
        </div>
    </nav>


    <div class="container">


        <div id="course-content" class="col-8 course-content">

            <p data-i18n="[html]classroom.courses.selectActivities"></p>

            <div class="col-sm mb-2 d-flex justify-content-center">
                <button class="btn c-btn-grey mx-1" id="course-add-activity" onclick="coursesManager.addActivityToCourse()">
                    <span data-i18n="courses.addActivity">Ajouter une activité</span>
                </button>

                <button class="btn c-btn-secondary mx-1" id="course-create-activity" onclick="showExercicePanel()">
                    <span data-i18n="courses.createActivity"><span class="me-1" data-i18n="classroom.activities.add">Créer une activité</span><i class="fas fa-chevron-right"></i></span>
                </button>
            </div>


            <div id="course-activities-content" class="course-activities-content">
            </div>

        </div>
        


        <div class="row text-center w-100 mt-1">
            <div class="col-sm order-first order-sm-last mb-2">
                <button class="btn c-btn-secondary" onclick="coursesManager.goToTitle(true)" id="course-validate">
                    <span data-i18n="manager.buttons.validate">Valider</span> <i class="fas fa-check"></i>
                </button>
            </div>
        </div>
    </div>
</div>




<div id="classroom-dashboard-classes-new-course-title" style="display:none;" class="dashboard-block">
    
    
    <!-- Top progress bar  -->
    <nav class="form-activity-container" style="margin: 0 auto;">
        <!-- Step 1 -->
        <div class="col text-center">
            <span class="form-activity form-activity-activate"><i class="fas fa-check"></i></span>
            <span data-i18n="courses.pagination.create"></span>
        </div>

        <div class="col"></div>

        <!-- Step  -->
        <div class=" col text-center">
            <span class="form-activity form-activity-activate">2</span>
            <span data-i18n="courses.pagination.title"></span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <!-- Step 3 -->
        <div class=" col text-center">
            <span class="form-activity form-activity-desactivate">3</span>
            <span data-i18n="courses.pagination.parameters"></span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <!-- Step 4 -->
        <div class="col text-center">
            <span class="form-activity form-activity-desactivate">4</span>
            <span data-i18n="courses.pagination.attribution"></span>
        </div>
    </nav>

    <div class="container">

        <div id="course-title-content" class="col-8 course-content">
            
            <div class="form-group">
                <label for="course-title" data-i18n="[html]courses.parameters.title"></label>
                <input type="text" class="form-control" id="course-title" data-i18n="[placeholder]courses.placeholderTitle">
            </div>

            <div class="form-group">
                <label for="course-description" data-i18n="[html]courses.parameters.description"></label>
                <textarea class="form-control" id="course-description" data-i18n="[placeholder]courses.placeholderDescription"></textarea>
            </div>

        </div>
        

        <div class="row text-center w-100 mt-1">
            <div class="col-sm mb-2">
                <button class="btn c-btn-grey" onclick="coursesManager.goToCreate()">
                    <span data-i18n="words.return">Retour</span>
                </button>
            </div>
            <div class="col-sm order-first order-sm-last mb-2">
                <button class="btn c-btn-secondary" onclick="coursesManager.persistTitlePage()" id="course-validate">
                    <span data-i18n="classroom.activities.form.validate">Valider</span> <i class="fas fa-check"></i>
                </button>
            </div>
        </div>

    </div>
    

</div>


<div id="classroom-dashboard-classes-new-course-parameters" style="display:none;" class="dashboard-block">
    
    
    <!-- Top progress bar  -->
    <nav class="form-activity-container" style="margin: 0 auto;">
        <!-- Step 1 -->
        <div class="col text-center">
            <span class="form-activity form-activity-activate"><i class="fas fa-check"></i></span>
            <span data-i18n="courses.pagination.create"></span>
        </div>

        <div class="col"></div>

        <!-- Step  -->
        <div class=" col text-center">
            <span class="form-activity form-activity-activate"><i class="fas fa-check"></i></span>
            <span data-i18n="courses.pagination.title"></span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <!-- Step 3 -->
        <div class=" col text-center">
            <span class="form-activity form-activity-activate">3</span>
            <span data-i18n="courses.pagination.parameters"></span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <!-- Step 4 -->
        <div class="col text-center">
            <span class="form-activity form-activity-desactivate">4</span>
            <span data-i18n="courses.pagination.attribution"></span>
        </div>
    </nav>

    <div class="container">

        <div id="course-title-content" class="col-8 course-content">
            
            <div class="row c-secondary-form">
                <div class="form-group col-md">
                    <label for="course-difficulty" data-i18n="[html]courses.parameters.difficulty"></label>
                    <select class="form-control" id="course-difficulty" aria-label="Default select example">
                        <option selected value="" data-i18n="courses.parameters.difficultyLevel.choose">Choississez la difficulté</option>
                        <option value="0" data-i18n="courses.parameters.difficultyLevel.easy">Facile</option>
                        <option value="1" data-i18n="courses.parameters.difficultyLevel.medium">Intermédiaire</option>
                        <option value="2" data-i18n="courses.parameters.difficultyLevel.advenced">Avancé</option>
                        <option value="3" data-i18n="courses.parameters.difficultyLevel.expert">Expert</option>
                    </select>
                </div>
            </div>
            
            <div class="row c-secondary-form">

                <div class="form-group col-md">
                    <label for="course-duration" data-i18n="[html]courses.parameters.duration"></label>
                    <input type="number" name="course-duration" id="course-duration" class="form-control" value="1" min="1">
                </div>

            </div>

            <div class="row c-secondary-form">
                <div class="form-group col-md">
                    <label for="course-license" data-i18n="[html]courses.parameters.license"></label>
                    <select class="form-control" id="course-license" aria-label="Default select example">
                        <option selected value="" data-i18n="courses.parameters.licenseType.choose">Choississez la licence</option>
                        <option value="0" data-i18n="courses.parameters.licenseType.1">Privée (vous seul•e pouvez voir cette ressource)</option>
						<option value="3" data-i18n="courses.parameters.licenseType.2">Déréférencée (ressource partageable par lien mais introuvable sur la page Ressources)</option>
						<option value="1" data-i18n="courses.parameters.licenseType.3">Publique CC-BY-NC-SA (ressource libre, non-commerciale et modifiable)</option>
						<option value="2" data-i18n="courses.parameters.licenseType.4">Publique CC-BY-NC-ND (ressource libre, non-commerciale et non-modifiable)</option>
                    </select>
                </div>
            </div>

            <div class="row c-secondary-form justify-content-between mb-4">
                <div class="d-flex">
                    <label for="course-format" class="d-flex align-items-center mb-0" data-i18n="">Format d'affichage du parcours : </label>
                    <div class="switcher mx-3">
                        <input type="radio" name="course-format" class="switcher__input switcher__input--left" value="0" id="course-standard" checked=""/>
                        <label for="course-standard" class="switcher__label text-capitalize" data-i18n="courses.format.standart"></label>

                        <input type="radio" name="course-format" class="switcher__input switcher__input--right" value="1" id="course-one-page"/>
                        <label for="course-one-page" class="switcher__label text-capitalize" data-i18n="courses.format.onePage"></label>

                        <span class="switcher__toggle"></span>
                    </div>
                </div>
                <!-- <button class="btn c-btn-secondary">Apercu</button> -->
            </div>

        </div>
        


        <div class="row text-center w-100 mt-1">
            <div class="col-sm mb-2">
                <button class="btn c-btn-grey" onclick="coursesManager.goToTitle()">
                    <span data-i18n="words.return">Retour</span>
                </button>
            </div>
            <div class="col-sm order-first order-sm-last mb-2">
                <button class="btn c-btn-secondary" onclick="coursesManager.persistParameters()" id="course-validate">
                    <span data-i18n="classroom.activities.form.validate">Valider</span> <i class="fas fa-check"></i>
                </button>
            </div>
        </div>

    </div>
</div>




<div id="classroom-dashboard-classes-new-course-attribution" style="display:none;" class="dashboard-block container">
    <!-- Top progress bar  -->
    <nav class="form-activity-container" style="margin: 0 auto;">
        <!-- Step 1 -->
        <div class="col text-center">
            <span class="form-activity form-activity-activate"><i class="fas fa-check"></i></span>
            <span data-i18n="courses.pagination.create"></span>
        </div>

        <div class="col"></div>

        <!-- Step  -->
        <div class=" col text-center">
            <span class="form-activity form-activity-activate"><i class="fas fa-check"></i></span>
            <span data-i18n="courses.pagination.title"></span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <!-- Step 3 -->
        <div class=" col text-center">
            <span class="form-activity form-activity-activate"><i class="fas fa-check"></i></span>
            <span data-i18n="courses.pagination.parameters"></span>
        </div>

        <div class="col" style="border-bottom: 1px solid var(--classroom-text-1); height: 1px; align-self: center;"></div>

        <!-- Step 4 -->
        <div class="col text-center">
            <span class="form-activity form-activity-activate">4</span>
            <span data-i18n="courses.pagination.attribution"></span>
        </div>
    </nav>

    <div class="assign-activity-container" style="margin: 0 auto;">

        <!-- Success title -->
        <div class="text-center px-1">
            <h3 class="c-text-primary text-uppercase font-weight-bold" data-i18n="courses.successfullyCreated">Parcours créé avec succès</h3>
        </div>

        <div class="container text-center">

            <div class="row my-2">
                <div class="col-sm mb-2">
                    <button id="attribute-course" data-i18n="[html]courses.attribution" onclick="coursesManager.attributeCourse()" class="new-activity-panel3 btn c-btn-primary">
                    </button>
                </div>

                <div class="col-sm mb-2">
                    <button class="btn c-btn-primary" data-i18n="[html]courses.return" onclick="navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher')">
                    </button>
                </div>
            </div>

            <p data-i18n="classroom.activities.form.hint"></p>
            <button class="btn c-btn-outline-primary" onclick="coursesManager.updateCourse()" data-i18n="courses.update">
                Modifier le parcours
            </button>
            
        </div>
    </div>

</div>


<div id="classroom-dashboard-classes-new-course-attribution-select" style="display:none;" class="dashboard-block container">

    <div class="assign-activity-container" style="margin: 0 auto;">

        <div class="row">
            <div class="col-12 mb-5 text-center">
                <button id="new-course-attribute" class="btn c-btn-primary mt-5">
                    <span data-i18n="classroom.activities.form.select1"></span> <i class="fas fa-plus"></i>
                </button>
                <div class="mt-2">
                    <span id="assign-total-student-number-course">0</span> <span data-i18n="classroom.activities.form.select2"></span>
                </div>
            </div>
        </div>

        <div class="section-facultative-options">

            <div class="section-header-facultative-options" 
                 onclick="coursesManager.facultativeOptions()" 
                 role="button" 
                 tabindex="0" 
                 aria-label="Développer ou réduire les options facultatives" 
                 aria-expanded="false"
                 onkeydown="if(event.key==='Enter'||event.key===' '){ event.preventDefault(); event.stopPropagation(); coursesManager.facultativeOptions(); }">
                <i id="i-course-options" class="ms-2 fas fa-lg fa-chevron-up" aria-hidden="true"></i>
                <h3 class="section-title-facultative-options" data-i18n="classroom.activities.facultative">Options facultatives</h3>
            </div>

            <div id="course-options" style="display: none;">
                <div class="container mt-3 pt-1" id="facultative">

                    <div class="row" id="form-add-date">
                        <div class="col mb-5 text-center c-primary-form assign-row">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="isDate-course-form">
                                <label for="isDate-course-form" class="form-check-label" data-i18n="classroom.activities.form.addDateCourse"></label>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 col-xl-6 c-primary-form assign-activity-calendar">
                            <div class="row">
                                <div class="col-6 text-end align-middle">
                                    <label for="date-begin-course-form" data-i18n="classroom.activities.form.dateBegin"></label>
                                </div>
                                <div class="col-6 text-start">
                                    <input type="date" id="date-begin-course-form">
                                </div>
                            </div>
                        </div>
    
                        <div class="col-12 col-xl-6 c-primary-form assign-activity-calendar">
                            <div class="row">
                                <div class="col-6 text-end align-middle">
                                    <label for="date-end-course-form" data-i18n="classroom.activities.form.dateEnd"></label>
                                </div>
                                <div class="col-6 text-start">
                                    <input type="date" id="date-end-course-form">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="row text-center my-2 mt-5">
            <div class="col-sm mb-2">
                <button class="btn c-btn-grey" onclick="navigatePanel('classroom-dashboard-activities-panel-teacher', 'dashboard-activities-teacher')">
                    <i class="fas fa-angle-left"></i> <span class="text-capitalize" data-i18n="words.return"></span>
                </button>
            </div>

            <div class="col-sm order-first order-sm-last mb-2">
                <button id="attribute-course-to-students" class="btn c-btn-primary" onclick="coursesManager.persistAttribution()" disabled>
                    <span data-i18n="classroom.activities.form.attributeCourse"></span><i class="fas fa-angle-right"></i>
                </button>
            </div>
        </div>

    </div>


</div>

<div id="classroom-dashboard-teacher-course-panel" class="dashboard-block" style="display:none;">
    <h3 id="course-title-options" class="activity-title"></h3>
    <div class="container-fluid">
        <div id="courses-overview">
            <div class="d-flex flex-column align-items-center justify-content-center mt-2">
                <div id="course-activities-overview" class="course-activities-result mt-4">
                </div>
            </div>
        </div>
    </div>
</div>


<div id="classroom-dashboard-ide-panel" style="display:none;" class="dashboard-block">
    <iframe width="100%" style="height:85vh;" frameborder="0" allowfullscreen="" style="border:1px #d6d6d6 solid;" src=""></iframe>
</div>
</div>
</div>
</div>
<script src="assets/js/lib/jquery-3.5.1/jquery-3.5.1.min.js"></script>
<script src="assets/js/lib/wysibb/jquery.wysibb.js"></script>
<script src="assets/js/lib/jquery_ui-1.12.0/jquery-ui.min.js"></script>
<script src="assets/js/lib/mathlive-0.85.1/mathlive.min.js"></script>
<link rel="stylesheet" stype="text/css" href="assets/js/lib/wysibb/theme/default/wbbtheme.css">
<script>
    $(document).ready(function () {
        let wbbOpt = {
            buttons: ",bold,italic,underline,math,|,justifyleft,justifycenter,justifyright,img,link,|,quote,bullist,|,vittaiframe,cabriiframe,vittapdf,video,peertube,vimeo,genialyiframe,gdocsiframe"
        }
        $("#activity-form-content").wysibb(wbbOpt);
    })
</script>
<script src="assets/js/lib/popper-1.16.0/popper.min.js">
</script>
<script src="assets/js/lib/bootstrap-5.3.0/bootstrap.min.js">
</script>
<script src="assets/js/lib/i18next.js"></script>
<script src="assets/js/lib/jquery-i18next.min.js"></script>
<script src="assets/js/lib/i18nextXHRBackend.min.js"></script>
<script
    src="assets/js/lib/i18nextBrowserLanguageDetector.min.js">
</script>

<script src="assets/js/lib/draggable/draggable.js"></script>
<!-- Breadcrumb management -->
<script src="assets/js/main/BreadcrumbManager.js"></script>
<!-- build:js-classroom -->
<script src="assets/js/utils/get.js"></script>
<script src="assets/js/utils/url.js"></script>
<script src="assets/js/utils/parsingJson.js"></script>
<script src="assets/js/utils/text.js"></script>
<script src="assets/js/lib/rotate.js"></script>
<script src="assets/js/utils/bbcodeToHtml.js"></script>
<script src="assets/js/utils/activityContentManager.js"></script>
<script src="assets/js/utils/registrationTemplate.js"></script>
<script src="assets/js/scripts/disconnect.js"></script>
<script src="assets/js/scripts/dashboardActivities.js"></script>
<script src="assets/js/scripts/teacherActivities.js"></script>
<script src="assets/js/scripts/manageClassroom.js"></script>
<script src="assets/js/scripts/displayPanel.js"></script>
<script src="assets/js/main/modal.js"></script>
<script src="assets/js/constants/modals.js"></script>
<script src="assets/js/scripts/buttons.js"></script>
<script src="assets/js/scripts/ActivityTracker.js"></script>
<script src="assets/js/scripts/activityManager.js"></script>
<script src="assets/js/scripts/classroomDisplay.js"></script>
<!-- end build -->
<script src="assets/js/main/Loader.js"></script>
<script src="assets/js/main/UIManager.js"></script>
<script src="assets/js/main/User.js"></script>
<script src="assets/js/main/ClassroomManager.js"></script>
<!-- manager & groupadmin -->
<script src="assets/js/main/ManagerManager.js"></script>
<script src="assets/js/main/GroupAdminManager.js"></script>
<script src="assets/js/main/MainManagerAndGroup.js"></script>
<!-- end manager & groupadmin -->
<script src="assets/js/main/Main.js"></script>
<script src="assets/js/main/Loader.js"></script>
<!-- courses -->
<script src="assets/js/main/CoursesManager.js"></script>
<!-- Custom Activities -->
<script src="assets/js/scripts/activities/FillInManager.js"></script>
<script src="assets/js/scripts/activities/DragAndDropManager.js"></script>
<script src="assets/js/scripts/activities/QuizManager.js"></script>
<script src="assets/js/scripts/activities/FreeManager.js"></script>
<script src="assets/js/scripts/activities/ReadingManager.js"></script>
<script src="assets/js/main/CustomActivityManager.js"></script>
<!-- Folder management -->
<script src="assets/js/main/FoldersManager.js" defer></script>


<script>
// ———————— Initialisation ————————
async function initUI() {
    await UIManager.init();
}

async function initUser() {
    await UserManager.init();
    return UserManager.getUser();
}

async function initMain() {
    await Main.init();
}

async function loadEventScripts(scripts) {
    await Loader.loadScripts(scripts);
}

function setUserPicture(char, type = 'png') {
    $('.user-picture').attr('src', `/classroom/assets/media/alphabet/${char}.${type}`);
}

function applyTheme(isRegular) {
    $('body').addClass(isRegular ? 'theme-teacher' : 'theme-student');
}

function setupRegularView(user) {
    applyTheme(true);
    setUserPicture(getFirstLetterOfPseudo(user.firstname));
}

function setupStudentView(user) {
    applyTheme(false);
    setUserPicture(getFirstLetterOfPseudo(user.pseudo));
    $('#classroom-dashboard-sidebar').show();
}

// ———————— Administration (users "regular") ————————
async function initAdminGroups() {
    // Lance les deux init en parallèle
    const [superAdmin, groupAdmin] = await Promise.all([
        mainManager.init(),
        mainGroupAdmin.init()
    ]);
    return { superAdmin, groupAdmin };
}

async function handleRegularUserFlow(onEnd) {
    const { superAdmin, groupAdmin } = await initAdminGroups();
    createRegistrationTemplate();
    goBackToPreviousView([superAdmin, groupAdmin]);
    coursesManager.actualizeCourse();
    onEnd();
}

// ———————— Classroom (users "student") ————————
async function handleStudentUserFlow(user) {
    const classroom = await Main.getClassroomManager().getMyClassroom(user.id);
    $('#classroom-name').text(classroom.name);
    ClassroomSettings.classroom = classroom.link;

    const panel = $_GET('panel');
    const nav = $_GET('nav');
    const opt = $_GET('option');
    const iface = $_GET('interface');

    if (panel && (ClassroomSettings.mixPanels.includes(panel) || ClassroomSettings.studentPanels.includes(panel))) {
        navigatePanel(panel, nav, opt, iface);
    } else {
        navigatePanel('classroom-dashboard-profil-panel', 'dashboard-profil', opt, iface);
    }

    if (user.isFromGar) {
        $('#settings-student').hide();
    }
}

// ———————— Bootstrap principal ————————
(async function bootstrap() {
    try {
        await initUI();
        const user = await initUser();
        await initMain();

        const SCRIPTS = [
            { id: "modals", src: "assets/js/scripts/loadModals.js" },
            { id: "i18n", src: "assets/js/scripts/checkMail.js" }
        ];
        await loadEventScripts(SCRIPTS);

        if (user.isRegular) {
            setupRegularView(user);
            Main.getClassroomManager()._addTaskToQueue(handleRegularUserFlow);
        } else {
            setupStudentView(user);
            await handleStudentUserFlow(user);
        }

        // This is for the SSO plugin only
        if (user.sso) {
            let profileData = document.getElementById('profile-password-and-mail');
            if (profileData) {
                profileData.style.display = 'none';
            }
        }

    } catch (err) {
        console.error("Initialization failed:", err);
        failedToLoad();
    }
})();


/* Refactored version of goBackToThePreviousView for better readability @Rémi C */
function goBackToPreviousView(administration = []) {
    const panel = $_GET('panel');
    const nav = $_GET('nav');
    const option = $_GET('option');
    const iface = $_GET('interface');
    const [isManagerAdmin, isGroupAdmin] = administration;

    if (!panel || !isValidPanel(panel)) {
        showTeacherSidebar();
        return navigateDefault(option, iface);
    }

    if (isManagerAdmin && isManagerView(panel, nav)) {
        handleManager(panel, nav, option, iface);
        return;
    }

    if (isGroupAdmin && isGroupAdminView(panel, nav)) {
        handleGroupAdmin(panel, nav, option, iface);
        return;
    }

    showTeacherSidebar();
    navigatePanel(panel, nav, option, iface);
}

function isValidPanel(panel) {
    const { mixPanels, teacherPanels, managerPanels, groupAdminPanels } = ClassroomSettings;
    return [mixPanels, teacherPanels, managerPanels, groupAdminPanels].some(list => list.includes(panel));
}

function isManagerView(panel, nav) {
    return panel.includes("manager") && nav.includes("manager");
}

function isGroupAdminView(panel, nav) {
    return panel.includes("groupadmin") && nav.includes("groupadmin");
}

function showTeacherSidebar() {
    $('#classroom-dashboard-sidebar-teacher').show();
}

function navigateDefault(option, iface) {
    return navigatePanel('classroom-dashboard-profil-panel-teacher', 'dashboard-profil-teacher', option, iface);
}

function handleManager(panel, nav, option, iface) {
    switchToManagerHome();
    navigatePanel(panel, nav, option, iface);

    if (panel === "manager-dashboard-main") {
        getGroupsManagerInfo();
    } else if (panel === "manager-apps-main") {
        getAndShowApps();
    }
}

function switchToManagerHome() {
    document.body.classList.add('theme-super-admin');
    document.body.classList.remove('theme-group-admin', 'theme-teacher');
    
    document.getElementById('classroom-dashboard-sidebar-teacher').style.display = 'none';
    document.getElementById('groupadmin-dashboard-sidebar').style.display = 'none';
    document.getElementById('manager-dashboard-sidebar').style.display = 'block';
    
    navigatePanel('classroom-dashboard-profil-panel-manager', 'dashboard-profil-manager');
    pseudoModal.closeAllModal();
    
    mainManager.getmanagerManager().getDefaultRestrictions().then(function(res) {
        mainManager.getmanagerManager()._defaultRestrictions = res;
    });
}

function handleGroupAdmin(panel, nav, option, iface) {
    switchToGroupAdmin();
    navigatePanel(panel, nav, option, iface);

    if (panel === "groupadmin-dashboard-users") {
        getTheGroupOftheAdmin();
    } else if (panel === "groupadmin-apps-main") {
        // Delay to ensure UI ready
        setTimeout(getGroupMonitoring, 500);
    }
}
</script>
<script src="assets/js/utils/translate.js" defer></script>
<!-- PLUGIN SCRIPTS-->

<!-- END PLUGIN SCRIPTS -->
</body>

</html>